/*
Copyright(c) 2012 Miracom, Inc.
*/
Ext.define("MES.data.CodeViewRegister",{constructor:function(){SmartFactory.codeview.register("GcmTableGroup",{type:"gcm",factory:"SYSTEM",table:SF_GCM_TABLE_GROUP,popupConfig:{title:T("Caption.Other.Table Group"),columns:[{header:T("Caption.Other.Name"),dataIndex:"key1",flex:1}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,vtype:"nospace",flex:1}]});SmartFactory.codeview.register("ProgramList",{type:"gcm",factory:"SYSTEM",table:SF_SEC_PROGRAM_LIST,popupConfig:{title:T("Caption.Other.Program ID"),columns:[{header:T("Caption.Other.Program ID"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("FunctionGroup",{type:"gcm",factory:"SYSTEM",table:SF_SEC_FUNCTION_GROUP,popupConfig:{title:T("Caption.Other.Function Group"),columns:[{header:T("Caption.Other.Name"),dataIndex:"key1"}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("ReleaseCode",{type:"gcm",table:SF_WIP_RELEASE_CODE,popupConfig:{title:T("Caption.Other.Release Code"),columns:[{header:T("Caption.Other.Release Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("LotType",{type:"gcm",table:SF_WIP_LOT_TYPE,popupConfig:{title:T("Caption.Other.Lot Type"),columns:[{header:T("Caption.Other.Lot Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1,maxLength:10,enforceMaxLength:true}]});SmartFactory.codeview.register("OwnerCode",{type:"gcm",table:SF_WIP_OWNER_CODE,popupConfig:{title:T("Caption.Other.Owner Code"),columns:[{header:T("Caption.Other.Owner Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1,maxLength:10,enforceMaxLength:true}]});SmartFactory.codeview.register("HoldCode",{type:"gcm",table:SF_WIP_HOLD_CODE,popupConfig:{title:T("Caption.Other.Hold Code"),columns:[{header:T("Caption.Other.Hold Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("LossCode",{type:"gcm",table:SF_WIP_LOSS_CODE,popupConfig:{title:T("Caption.Other.Loss Code"),columns:[{header:T("Caption.Other.Loss Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("BonusCode",{type:"gcm",table:SF_WIP_BONUS_CODE,popupConfig:{title:T("Caption.Other.Bonus Code"),columns:[{header:T("Caption.Other.Bonus Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("AttributeType",{type:"gcm",table:SF_ATTR_TYPE_TABLE,popupConfig:{title:T("Caption.Other.Attribute Type"),columns:[{header:T("Caption.Other.Attribute Type"),dataIndex:"key1",flex:1}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("MaterialType",{type:"gcm",table:SF_WIP_MATERIAL_TYPE,popupConfig:{title:T("Caption.Other.Material Type"),columns:[{header:T("Caption.Other.Material Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("MaterialPackType",{type:"gcm",table:SF_WIP_MATERIAL_PACKTYPE,popupConfig:{title:T("Caption.Other.Pack Type"),columns:[{header:T("Caption.Other.Pack Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:1,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("FactoryType",{type:"gcm",factory:"SYSTEM",table:SF_SYS_FACTORY_TYPE,popupConfig:{title:T("Caption.Other.Factory Type"),columns:[{header:T("Caption.Other.Factory Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:2,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("Unit",{type:"gcm",table:SF_WIP_UNIT_TABLE,popupConfig:{title:T("Caption.Other.Unit"),columns:[{header:T("Caption.Other.Unit"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("EDCUnit",{type:"gcm",table:SF_EDC_UNIT_TABLE,popupConfig:{title:T("Caption.Other.Unit"),columns:[{header:T("Caption.Other.Unit"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1,maxLength:10,enforceMaxLength:true}]});SmartFactory.codeview.register("ResourceType",{type:"gcm",table:SF_RAS_RES_TYPE,popupConfig:{title:T("Caption.Other.Resource Type"),columns:[{header:T("Caption.Other.Resource Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("Area",{type:"gcm",table:SF_RAS_AREA_CODE,popupConfig:{title:T("Caption.Other.Area"),columns:[{header:T("Caption.Other.Area"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SubArea",{type:"gcm",table:SF_RAS_SUBAREA_CODE,popupConfig:{title:T("Caption.Other.Sub Area"),columns:[{header:T("Caption.Other.Area"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("CarrierType1",{type:"gcm",table:SF_RAS_CRR_TYPE1,popupConfig:{title:T("Caption.Other.Carrier Type"),columns:[{header:T("Caption.Other.Carrier Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("CarrierType2",{type:"gcm",table:SF_RAS_CRR_TYPE2,popupConfig:{title:T("Caption.Other.Carrier Type"),columns:[{header:T("Caption.Other.Carrier Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("CarrierType3",{type:"gcm",table:SF_RAS_CRR_TYPE3,popupConfig:{title:T("Caption.Other.Carrier Type"),columns:[{header:T("Caption.Other.Carrier Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("SubresourceType",{type:"gcm",table:SF_RAS_SUBRES_TYPE,popupConfig:{title:T("Caption.Other.Sub Resource Type"),columns:[{header:T("Caption.Other.Sub Resource Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("ChamberGroup",{type:"gcm",table:SF_RAS_CHAMBER_GROUP,popupConfig:{title:T("Caption.Other.Chamber Group"),columns:[{header:T("Caption.Other.Chamber Group"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("QueryType",{type:"gcm",table:SF_SHEET_QUERY_TYPE,popupConfig:{title:T("Caption.Other.Query Type"),columns:[{header:T("Caption.Other.Query Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("CheckType",{type:"gcm",table:SF_SHEET_SHEET_TYPE,popupConfig:{title:T("Caption.Other.Check Type"),columns:[{header:T("Caption.Other.Check Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("ToolGroup",{type:"gcm",table:SF_RAS_TOOL_GRP,popupConfig:{title:T("Caption.Other.Tool Group"),columns:[{header:T("Caption.Other.Tool Group"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("ToolGrade",{type:"gcm",table:SF_RAS_TOOL_GRADE,popupConfig:{title:T("Caption.Other.Tool Grade"),columns:[{header:T("Caption.Other.Tool Grade"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:1,flex:1}]});SmartFactory.codeview.register("ToolStatus",{type:"gcm",table:SF_RAS_TOOL_STATUS,popupConfig:{title:T("Caption.Other.Tool Status"),columns:[{header:T("Caption.Other.Tool Status"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("WorkPosition",{type:"gcm",table:SF_RAS_WORK_POSITION,popupConfig:{title:T("Caption.Other.Resource Type"),columns:[{header:T("Caption.Other.Work Position"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("ToolDefect",{type:"gcm",table:SF_RAS_TOOL_DEFECT,popupConfig:{title:T("Caption.Other.Tool Defect"),columns:[{header:T("Caption.Other.Defect Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("DataType",{type:"gcm",table:SF_SHEET_DATA_TYPE,popupConfig:{title:T("Caption.Other.Data Type"),columns:[{header:T("Caption.Other.Data Type"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("ReworkCode",{type:"gcm",table:SF_WIP_REWORK_CODE,popupConfig:{title:T("Caption.Other.Rework Code"),columns:[{header:T("Caption.Other.Rework Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TerminateCode",{type:"gcm",table:SF_WIP_TERMINATE_CODE,popupConfig:{title:T("Caption.Other.Terminate Code"),columns:[{header:T("Caption.Other.Terminate Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:12,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("RepairCode",{type:"gcm",table:SF_WIP_REPAIR_CODE,popupConfig:{title:T("Caption.Other.Repair Code"),columns:[{header:T("Caption.Other.Repair Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:10,flex:1}]});SmartFactory.codeview.register("ResultCode",{type:"gcm",table:SF_WIP_RESULT_CODE,popupConfig:{title:T("Caption.Other.Result Code"),columns:[{header:T("Caption.Other.Result Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:10,flex:1}]});SmartFactory.codeview.register("ActionCode",{type:"gcm",table:SF_WIP_ACTION_CODE,popupConfig:{title:T("Caption.Other.Action Code"),columns:[{header:T("Caption.Other.Action Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:10,flex:1}]});SmartFactory.codeview.register("RmaCreateCode",{type:"gcm",table:SF_RMA_CREATE_CODE,popupConfig:{title:T("Caption.Other.Create Code"),columns:[{header:T("Caption.Other.Create Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1,maxLength:10,enforceMaxLength:true}]});SmartFactory.codeview.register("CreateCode",{type:"gcm",table:SF_WIP_CREATE_CODE,popupConfig:{title:T("Caption.Other.Create Code"),columns:[{header:T("Caption.Other.Create Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("SublotGrade",{type:"gcm",table:SF_WIP_SUBLOT_GRADE,popupConfig:{title:T("Caption.Other.Sublot Grade"),columns:[{header:T("Caption.Other.Grade"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",enforceMaxLength:true,maxLength:1,flex:1}]});SmartFactory.codeview.register("CvCode",{type:"gcm",table:SF_WIP_CV_CODE,popupConfig:{title:T("Caption.Other.Cv Code"),columns:[{header:T("Caption.Other.Cv Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",flex:1}]});SmartFactory.codeview.register("ShipCode",{type:"gcm",table:SF_WIP_SHIP_CODE,popupConfig:{title:T("Caption.Other.Ship Code"),columns:[{header:T("Caption.Other.Code"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Description"),dataIndex:"data1",flex:2}]},fields:[{column:"key1",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbSubresource",{type:"table",table:"MRASSRSDEF",order:[{column:"subresId",ascending:true}],condition:[{column:"deleteFlag",value:" "}],popupConfig:{title:T("Caption.Other.Sub Resource"),columns:[{header:T("Caption.Other.Sub Resource"),dataIndex:"subresId",flex:1},{header:T("Caption.Other.Desc"),dataIndex:"subresDesc",flex:2}]},fields:[{column:"subresId",flex:1,enforceMaxLength:true,maxLength:20}]});SmartFactory.codeview.register("TbResourceEvent",{type:"table",table:"MRASEVNDEF",popupConfig:{title:T("Caption.Other.Event"),columns:[{header:T("Caption.Other.Event"),dataIndex:"eventId",flex:1},{header:T("Caption.Other.Desc"),dataIndex:"eventDesc",flex:2}]},fields:[{column:"eventId",flex:1,enforceMaxLength:true,maxLength:12}]});SmartFactory.codeview.register("TbOperation",{type:"table",table:"MWIPOPRDEF",order:[{column:"oper",ascending:true}],popupConfig:{title:T("Caption.Other.Operation"),columns:[{header:T("Caption.Other.Operation"),dataIndex:"oper",flex:1},{header:T("Caption.Other.Description"),dataIndex:"operDesc",flex:2}]},fields:[{column:"oper",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbMaterial",{type:"table",table:"MWIPMATDEF",order:[{column:"matId",ascending:true}],condition:[{column:"deleteFlag",value:"Y",operator:"!="},{column:"deactiveFlag",value:"Y",operator:"!="}],popupConfig:{title:T("Caption.Other.Material"),columns:[{header:T("Caption.Other.Material"),dataIndex:"matId",flex:2},{header:T("Caption.Other.Version"),dataIndex:"matVer",flex:1},{header:T("Caption.Other.Description"),dataIndex:"matDesc",flex:3}]},fields:[{column:"matId",flex:2,maxLength:30,enforceMaxLength:true},{column:"matVer",flex:1,vtype:"numbers",maxLength:6,enforceMaxLength:true}]});SmartFactory.codeview.register("TbGcmTable",{type:"table",table:"MGCMTBLDEF",popupConfig:{title:T("Caption.Other.Table Name"),columns:[{header:T("Caption.Other.Table Name"),dataIndex:"tableName",flex:2},{header:T("Caption.Other.Description"),dataIndex:"tableDesc",flex:3}]},fields:[{column:"tableName",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbSecGroup",{type:"table",table:"MSECGRPDEF",popupConfig:{title:T("Caption.Other.Security Group"),columns:[{header:T("Caption.Other.Security Group"),dataIndex:"secGrpId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"secGrpDesc",flex:1}]},fields:[{column:"secGrpId",flex:1}]});SmartFactory.codeview.register("TbBasInquiry",{type:"table",table:"MBASINQDEF",popupConfig:{title:T("Caption.Other.Inquiry ID"),columns:[{header:T("Caption.Other.Inquiry ID"),dataIndex:"inquiryId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"inquiryTitle",flex:1}]},fields:[{column:"inquiryId",flex:1}]});SmartFactory.codeview.register("TbFlow",{type:"table",table:"MWIPFLWDEF",order:[{column:"flow",ascending:true}],popupConfig:{title:T("Caption.Other.Flow"),columns:[{header:T("Caption.Other.Flow"),dataIndex:"flow",flex:1},{header:T("Caption.Other.Flow Desc"),dataIndex:"flowDesc",flex:1}]},fields:[{column:"flow",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbAttributeName",{type:"table",table:"MATRNAMDEF",popupConfig:{title:T("Caption.Other.Attribute Name"),columns:[{header:T("Caption.Other.Attribute Name"),dataIndex:"attrName",flex:1},{header:T("Caption.Other.Description"),dataIndex:"attrDesc",flex:2}]},fields:[{column:"attrName",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbBomSet",{type:"table",table:"MBOMSETDEF",popupConfig:{title:T("Caption.Other.BOM Set ID"),columns:[{header:T("Caption.Other.BOM Set ID"),dataIndex:"bomSetId",flex:1},{dataIndex:"deleteFlag",hidden:true}],condition:[{column:"matOrOrdFlag",value:"M"}]},fields:[{column:"bomSetId",maxLength:24,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbFactory",{type:"table",table:"MWIPFACDEF",order:[{column:"factory",ascending:true}],popupConfig:{title:T("Caption.Other.Factory"),columns:[{header:T("Caption.Other.Factory"),dataIndex:"factory",flex:1},{header:T("Caption.Other.Desc"),dataIndex:"facDesc",flex:2}]},fields:[{column:"factory",vtype:"nospace",maxLength:10,enforceMaxLength:true,flex:1}],factoryConditionEnabled:false});SmartFactory.codeview.register("TbResource",{type:"table",table:"MRASRESDEF",order:[{column:"resId",ascending:true}],condition:[{column:"deleteFlag",value:" "}],popupConfig:{title:T("Caption.Other.Resource"),columns:[{header:T("Caption.Other.Resource"),dataIndex:"resId",flex:1},{header:T("Caption.Other.Desc"),dataIndex:"resDesc",flex:2}]},fields:[{column:"resId",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("TbCarrier",{type:"table",table:"MRASCRRDEF",popupConfig:{title:T("Caption.Other.Carrier"),columns:[{header:T("Caption.Other.Carrier"),dataIndex:"crrId",flex:1},{header:T("Caption.Other.Desc"),dataIndex:"crrDesc",flex:2}]},fields:[{column:"crrId",flex:1,maxLength:20,enforceMaxLength:true}]});SmartFactory.codeview.register("SvFlowAndSeq",{type:"service",store:"WIP.store.WipViewFlowListOut.flowList",params:{procstep:"1",matId:"",matVer:""},popupConfig:{title:T("Caption.Other.Flow"),columns:[{header:T("Caption.Other.Flow"),dataIndex:"flow",flex:2},{header:T("Caption.Other.Flow Seq"),dataIndex:"flowSeqNum",flex:1},{header:T("Caption.Other.Flow Desc"),dataIndex:"flowDesc",flex:2}]},fields:[{column:"flow",flex:2,maxLength:20,enforceMaxLength:true,vtype:"nospace"},{column:"flowSeqNum",flex:1,maxLength:2,enforceMaxLength:true,vtype:"numbers"}]});SmartFactory.codeview.register("SvFlow",{type:"service",store:"WIP.store.WipViewFlowListOut.flowList",params:{procstep:"1",matId:"",matVer:""},popupConfig:{title:T("Caption.Other.Flow"),columns:[{header:T("Caption.Other.Flow"),dataIndex:"flow",flex:2},{header:T("Caption.Other.Flow Desc"),dataIndex:"flowDesc",flex:3}]},fields:[{column:"flow",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvCmfItem",{type:"service",factory:SmartFactory.login.factory,store:"WIP.store.WipViewFactoryCmfItemOut.dataTbl",popupConfig:{title:T("Caption.Other.CMF Item List"),columns:[{header:T("Caption.Other.Prompt"),dataIndex:"prompt",flex:1},{header:T("Caption.Other.Table Name"),dataIndex:"tableName",flex:2}]},fields:[{column:"prompt",flex:1},{column:"tableName",flex:1}]});SmartFactory.codeview.register("SvResourceGroup",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewResourceGroupListOut.resgList",params:{procstep:"1"},popupConfig:{title:T("Caption.Other.Resource Group"),columns:[{header:T("Caption.Other.Resource Group"),dataIndex:"resgId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"resgDesc",flex:2}]},fields:[{column:"resgId",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvCarrierGroup",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewCarrierGroupListOut.crrgrpList",params:{procstep:"1"},popupConfig:{title:T("Caption.Other.Carrier Group"),columns:[{header:T("Caption.Other.Carrier Group"),dataIndex:"crrGroup",flex:1},{header:T("Caption.Other.Description"),dataIndex:"crrGrpDesc",flex:2}]},fields:[{column:"crrGroup",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("SvColSet",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.EdcViewColSetListOut.ColSetList",params:{procstep:"3",lotOrResFlag:"R",nextColSetId:""},popupConfig:{title:T("Caption.Other.Col Set ID"),columns:[{header:T("Caption.Other.Col Set ID"),dataIndex:"colSetId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"colSetDesc",flex:1},{dataIndex:"deleteFlag",hidden:true}]},fields:[{column:"colSetId",maxLength:25,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvCalendar",{type:"service",factory:SmartFactory.login.factory,store:"BAS.store.BasViewCalendarListOut.calendarList",popupConfig:{title:T("Caption.Other.Calendar ID"),columns:[{header:T("Caption.Other.Calendar ID"),dataIndex:"calendarId",flex:1}]},params:{procstep:"1",year:new Date().getFullYear(),calendarType:"W"},fields:[{column:"calendarId",flex:1,readOnly:true,value:SmartFactory.login.factory}]});SmartFactory.codeview.register("SvTool",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewToolListOut.toolList",popupConfig:{title:T("Caption.Other.Tool"),columns:[{header:T("Caption.Other.Tool"),dataIndex:"toolId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"toolDesc",flex:2}]},fields:[{column:"toolId",maxLength:30,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvToolType",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewToolTypeListOut.ttypeList",params:{procstep:"1",deleteFlag:"N"},popupConfig:{title:T("Caption.Other.Tool Type"),columns:[{header:T("Caption.Other.Tool Type"),dataIndex:"toolType",flex:1},{header:T("Caption.Other.Description"),dataIndex:"toolTypeDesc",flex:2}]},fields:[{column:"toolType",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvToolByMFO",{type:"service",factory:SmartFactory.login.factory,store:"WIP.store.WipViewToolListByMfoOut.toolList",popupConfig:{title:T("Caption.Other.Tool"),columns:[{header:T("Caption.Other.Tool ID"),dataIndex:"toolId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"toolDesc",flex:2},{header:T("Caption.Other.Resource"),dataIndex:"resId",flex:1}]},fields:[{column:"toolId",flex:1}]});SmartFactory.codeview.register("SvSubresource",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewSubResourceListOut.SresList",popupConfig:{title:T("Caption.Other.Sub Resource"),columns:[{header:T("Caption.Other.Sub Resource"),dataIndex:"subresId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"subresDesc",flex:2}]},paramsScope:this,fields:[{column:"subresId",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvSubresEvent",{type:"service",store:"RAS.store.RasViewSubReseventListOut.EventList",popupConfig:{title:T("Caption.Other.Event ID"),columns:[{header:T("Caption.Other.Event ID"),dataIndex:"eventId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"eventDesc",flex:2}]},paramsScope:this,fields:[{column:"eventId",maxLength:12,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvResourceEvent",{type:"service",store:"RAS.store.RasViewReseventListOut.eventList",popupConfig:{title:T("Caption.Other.Event ID"),columns:[{header:T("Caption.Other.Event ID"),dataIndex:"eventId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"eventDesc",flex:2}]},fields:[{column:"eventId",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvEvent",{type:"service",store:"RAS.store.RasViewEventListOut.EventList",params:{procstep:"1"},popupConfig:{title:T("Caption.Other.Event ID"),columns:[{header:T("Caption.Other.Event ID"),dataIndex:"eventId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"eventDesc",flex:2}]},paramsScope:this,fields:[{column:"eventId",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvCharacter",{type:"service",factory:SmartFactory.login.factory,store:"EDC.store.EdcViewCharacterListOut.charList",popupConfig:{title:T("Caption.Other.Charachter ID"),columns:[{header:T("Caption.Other.Step"),dataIndex:"charId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"charDesc",flex:2}]},fields:[{column:"charId",flex:1}]});SmartFactory.codeview.register("SvOperation",{type:"service",store:"WIP.store.WipViewOperationListOut.list",params:{procstep:"1",filter:"",matId:"",matVer:"",flow:"",secChkFlag:" "},popupConfig:{title:T("Caption.Other.Operation"),columns:[{header:T("Caption.Other.Operation"),dataIndex:"oper",flex:1},{header:T("Caption.Other.Description"),dataIndex:"operDesc",flex:2}]},fields:[{column:"oper",vtype:"nospace",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvColSetByGroup",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.EdcViewColSetListByGroupOut.colSetList",params:{procstep:"1",lotOrResFlag:" ",includeDelFlag:" ",nextColSetId:""},popupConfig:{title:T("Caption.Other.Col Set ID By Group"),columns:[{header:T("Caption.Other.Col Set ID"),dataIndex:"colSetId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"colSetDesc",flex:1},{dataIndex:"deleteFlag",hidden:true}]},fields:[{column:"colSetId",maxLength:25,enforceMaxLength:true,vtype:"nospace",flex:1},{column:"colSetDesc",flex:1,readOnly:true,submitValue:false}]});SmartFactory.codeview.register("SvResource",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewResourceListOut.resList",popupConfig:{title:T("Caption.Other.Resource"),columns:[{header:T("Caption.Other.Resource"),dataIndex:"resId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"resDesc",flex:2},{hidden:true,dataIndex:"deleteFlag"}]},fields:[{column:"resId",enforceMaxLength:true,maxLength:20,flex:1}]});SmartFactory.codeview.register("SvPort",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewPortListOut.portList",params:{procstep:"1",resId:"",subresId:""},popupConfig:{title:T("Caption.Other.Port"),columns:[{header:T("Caption.Other.Port ID"),dataIndex:"portId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"portDesc",flex:2}]},fields:[{column:"portId",enforceMaxLength:true,maxLength:10,flex:1}]});SmartFactory.codeview.register("SvCarrier",{type:"service",factory:SmartFactory.login.factory,store:"RAS.store.RasViewCarrierListOut.crrList",popupConfig:{title:T("Caption.Other.Carrier ID"),columns:[{header:T("Caption.Other.Carrier ID"),dataIndex:"crrId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"crrDesc",flex:2}]},fields:[{column:"crrId",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvStep",{type:"service",factory:SmartFactory.login.factory,store:"WIP.store.WipViewStepListOut.List",popupConfig:{title:T("Caption.Other.Step"),columns:[{header:T("Caption.Other.Step"),dataIndex:"step",flex:1},{header:T("Caption.Other.Description"),dataIndex:"stepDesc",flex:1}]},fields:[{column:"step",flex:1}]});SmartFactory.codeview.register("SvAlarm",{type:"service",factory:SmartFactory.login.factory,store:"ALM.store.AlmViewAlarmMsgListOut.alarmList",params:{procstep:"1"},popupConfig:{title:T("Caption.Other.Alarm"),columns:[{header:T("Caption.Other.Alarm"),dataIndex:"alarmId",flex:1},{header:T("Caption.Other.Description"),dataIndex:"alarmDesc",flex:2}]},fields:[{column:"alarmId",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvOption",{type:"service",factory:SmartFactory.login.factory,store:"WIP.store.WipViewMfoOptionPromptListOut.list",params:{procstep:"1"},popupConfig:{title:T("Caption.Other.Flow"),columns:[{header:T("Caption.Other.Option Name"),dataIndex:"optionName",flex:2},{header:T("Caption.Other.Description"),dataIndex:"optionDesc",flex:1}]},fields:[{column:"optionName",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvAttributeName",{type:"service",store:"BAS.store.BasViewAttributeNameListOut.NameList",popupConfig:{title:T("Caption.Other.Attribute Name"),columns:[{header:T("Caption.Other.Attribute Name"),dataIndex:"attrName",flex:1},{header:T("Caption.Other.Description"),dataIndex:"attrDesc",flex:2}]},fields:[{column:"attrName",maxLength:100,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvReworkFlow",{type:"service",store:"RAS.store.WipViewReworkFlowListOut.List",popupConfig:{title:T("Caption.Other.Rework Flow"),columns:[{header:T("Caption.Other.Rework Flow"),dataIndex:"rwkFlow",flex:2},{header:T("Caption.Other.Rework Flow Seq"),dataIndex:"rwkFlowSeqNum",flex:1}]},fields:[{column:"rwkFlow",flex:2,maxLength:20,enforceMaxLength:true,vtype:"nospace"},{column:"rwkFlowSeqNum",flex:1,maxLength:2,enforceMaxLength:true,vtype:"numbers"}]});SmartFactory.codeview.register("SvReworkOperation",{type:"service",store:"WIP.store.WipViewReworkOperListOut.List",popupConfig:{title:T("Caption.Other.Rework Operation"),columns:[{header:T("Caption.Other.Rework Operation"),dataIndex:"rwkOper",flex:1},{header:T("Caption.Other.Description"),dataIndex:"rwkOperDesc",flex:2}]},fields:[{column:"rwkOper",vtype:"nospace",maxLength:20,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvShipFactory",{type:"service",params:{procstep:"1"},store:"WIP.store.WipViewShipFactoryListOut.List",popupConfig:{title:T("Caption.Other.Ship Factory"),columns:[{header:T("Caption.Other.Factory"),dataIndex:"factoryTo",flex:1},{header:T("Caption.Other.Operation"),dataIndex:"transitOper",flex:2}]},fields:[{column:"factoryTo",maxLength:10,enforceMaxLength:true,flex:1}]});SmartFactory.codeview.register("SvTransferFactory",{type:"service",store:"WIP.store.WipViewMfoOptionValueOut.ValueList",popupConfig:{title:T("Caption.Other.Transfer Factory"),columns:[{header:T("Caption.Other.Factory"),dataIndex:"data1",flex:1},{header:T("Caption.Other.Flow"),dataIndex:"data2",flex:1},{header:T("Caption.Other.Oper"),dataIndex:"data3",flex:1},{header:T("Caption.Other.Override Flag"),dataIndex:"key2",flex:1}]},fields:[{column:"data1",flex:1}]})}});Ext.define("MES.mixin.CodeView",function(){var a={};Ext.applyIf(a,{GCM:{name:"GCM",type:"gcm",popupConfig:{title:T("Caption.Other.CodeView"),columns:[{header:T("Caption.Other.Name"),dataIndex:"key1",flex:1},{header:T("Caption.Other.Desc"),dataIndex:"data1",flex:2}]},fieldSearch:true,fields:[{column:"key1",vtype:"nospace",maxLength:30,enforceMaxLength:true,flex:1}]},TABLE:{name:"TABLE",type:"table",popupConfig:{title:T("Caption.Other.CodeView")},fieldSearch:true},SERVICE:{name:"SERVICE",type:"service",popupConfig:{title:T("Caption.Other.CodeView")},fieldSearch:true},SQLQUERY:{name:"SQLQUERY",type:"sqlquery",store:"BAS.store.BasSqlQueryOut",popupConfig:{title:T("Caption.Other.CodeView")},fieldSearch:true}});return{codeview:{show:function(q,c){var d={};var j=SmartFactory.codeview.get(q.codeviewName);Ext.apply(d,q);Ext.applyIf(d,j);d.callback=q.selectedCallback;d.fieldset=q;if(d.popupConfig==undefined){throw new Error("codeviewOpts[popupConfig] should be configured.")}var p=Ext.applyIf(d.popupConfig,j.popupConfig);if(p.headers&&p.headers.length>0){if(p.columns==undefined||p.keyCnt>1){var k=[];var e=p.keyCnt||1;for(var g=0;g<p.headers.length;g++){k[g]={header:p.headers[g],flex:1};if(g<e){k[g].dataIndex="key"+(g+1)}else{k[g].dataIndex="data"+(g+1-e)}}d.popupConfig.columns=k}else{for(var g in p.columns){var h=p.headers[g]||p.columns[g].header;p.columns[g].header=h}d.popupConfig.columns=p.columns}}if(q.condition==undefined){d.condition=d.condition||[]}else{var m=Ext.clone(q.condition);if(q.condition.length>0){for(var g in q.condition){var o=q.condition[g].scope||q;if(Ext.typeOf(q.condition[g].value)=="function"){m[g].value=q.condition[g].value(o);if(m[g].value===false){return}}delete m[g].scope}}d.condition=m}for(var g in d.condition){delete d.condition[g].scope}if(Ext.typeOf(q.table)=="function"){var o=q.tableScope||q;var n=q.table(o,q);if(n===false){return}d.table=n}if(Ext.typeOf(q.params)=="function"){var o=q.paramsScope||q;var f=q.params(o,q);if(f===false){return}d.params=f;d.store=q.store||d.store||""}if(c==="combo"){var l=d.comboConfig||{};l.displayField=l.displayField||d.displayField||"key1";l.valueField=l.valueField||d.valueField||l.displayField;l.listTpl=l.listTpl||d.listTpl||"{"+l.displayField+"}";Ext.apply(d,l);return d}var b=Ext.create("MES.view.window.CodeViewPopup",{codeviewOpts:d});b.show();return b},register:function(c,b){if(!b||c=="GCM"||c=="TABLE"||c=="SERVICE"){return}Ext.applyIf(b,{name:c,type:"table",fieldSearch:true,factory:SmartFactory.login.factory});a[c]=b},get:function(b){b=b||"GCM";return a[b]},names:function(){var c=[];for(var b in a){c.push(b)}return c}}}}());Ext.define("MES.mixin.CommonFunction",function(){function h(k,l){switch(l){case SF_CONVERT_DATE_FORMAT:return Ext.Date.format(k,"Ymd");break;case SF_CONVERT_HYPHENDATE_FORMAT:return Ext.Date.format(k,"Y-m-d");break;case SF_CONVERT_SLASHDATE_FORMAT:return Ext.Date.format(k,"Y/m/d");break;case SF_CONVERT_NODAYDATE_FORMAT:return Ext.Date.format(k,"Ym");break;case SF_CONVERT_TIME_FORMAT:return Ext.Date.format(k,"His");break;case SF_CONVERT_DATETIME_FORMAT:return Ext.Date.format(k,"Ymdhis");break;case SF_CONVERT_YEAR_FORMAT:return Ext.Date.format(k,"Y");break;case SF_CONVERT_MONTH_FORMAT:return Ext.Date.format(k,"m");break}}function a(q,m,l,n,p,o){var k=null;Ext.Ajax.request({url:"service/WipViewProctime.json",method:"GET",async:false,params:{procstep:"1",factory:SF.login.factory,userId:SF.login.id,matId:q,matVer:m,flow:l,flowSeqNum:n,oper:p,qty:o},success:function(r,s){k=Ext.JSON.decode(r.responseText)}});return k}function f(o,l,n){if(!l){return false}function m(q){var p=[];if(!q){return[]}function r(t,s){var x=t.length||0;var v=0;if(t&&x>0){for(var u=0,x=t.length;u<x;u++){if(t[u].hidden!=true&&t[u].exported!=false){if(t[u].xtype=="rownumberer"||t[u].dataIndex||t[u].items.getCount()>0){var w=[];var y={};if(t[u].header||t[u].text){var z=t[u].header||t[u].text;if(z=="&#160"){y.header="  "}else{y.header=z}}if(t[u].dataIndex){y.dataIndex=t[u].dataIndex}if(t[u].width){y.width=t[u].width}if(t[u].xtype&&t[u].xtype=="rownumberer"){y.xtype=t[u].xtype}if(t[u].items.getCount()>0){r(t[u].items.items,w);y.columns=w}s.push(y)}}}}return v}if(q.lockedGrid){r(q.lockedGrid.columns,p)}if(q.normalGrid){r(q.normalGrid.columns,p)}if(p.length==0){r(q.columns,p)}return p}n=n||{};n["export"]={title:o||"",columns:m(l)};for(var k in n){if(Ext.typeOf(n[k])==="object"||Ext.typeOf(n[k])==="array"){n[k]=JSON.stringify(n[k])}}return n}function i(m){if(m){m=(m.charAt(0)=="#")?m.substring(1,7):m;var k=parseInt(m,16);var l=255;return(l<<24)+k}}function c(l){var k=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];var m="";m+=k[(l>>20)&15];m+=k[(l>>16)&15];m+=k[(l>>12)&15];m+=k[(l>>8)&15];m+=k[(l>>4)&15];m+=k[l&15];return m}function d(){var k=Ext.getStore("ALM.store.AlarmStore");var l=0;var n=[];Ext.Array.each(k.data.items,function(o){if(o.data.confirmFlag!="Y"){l++}});Ext.getCmp("alm_tray_carousel").setData([]);Ext.getCmp("alm_tray_count").setText(l);if(l==0){Ext.getCmp("alm_tray_carousel").setWidth(22);Ext.getCmp("alm_tray_count").setVisible(false)}else{var m=[];Ext.getCmp("alm_tray_carousel").setWidth(300);Ext.Array.each(k.data.items,function(p){var o=Ext.Date.parse(p.data.createTime,"YmdHis");if(p.data.confirmFlag!="Y"){m.push({time:Ext.Date.format(o,"H:i"),text:p.data.alarmMsg})}});Ext.getCmp("alm_tray_carousel").setData(m);Ext.getCmp("alm_tray_count").setVisible(true)}Ext.Array.each(k.data.items,function(o){n.push(o.data)});SmartFactory.setting.set("alarm",null);SmartFactory.setting.set("alarm",n)}function e(s,n,p,r,l){var t=s;var m=false;var k="GET";var o=true;if(l){m=l.showErrorMsg||false;k=l.method||"GET";o=l.async!==false?true:false}var q={url:n,method:k,params:p,async:o,success:function(v,w){var u=Ext.JSON.decode(v.responseText)||{};var x=u.success||false;v.result=u;v.params=v.request.options.params;if(u.success!==true&&m==true){SF.msgRtn("failure",u)}if(Ext.typeOf(r)=="function"){r(t,v,x)}},failure:function(u,v){if(Ext.typeOf(r)=="function"){r(t,u,false)}}};if(t){q.scope=t}Ext.Ajax.request(q)}function j(l,p,n){var k=false;var q="GET";if(n){k=n.showErrorMsg||false;q=n.method||"GET"}var o=false;var m={url:l,method:q,params:p,async:false,success:function(s,t){var r=Ext.JSON.decode(s.responseText);s.result=r;s.params=s.request.options.params;o=s;if(r.success!==true&&k==true){SF.msgRtn("failure",r)}},failure:function(r,s){Ext.log("failure");Ext.log(r)}};Ext.Ajax.request(m);return o}function b(k){var m="";var l=k;if(Ext.typeOf(l)!="date"){return m}if(SF.gv.gShiftInfor.bVariableShift==false){if(SF.gv.gShiftInfor.cShift1DayFlag=="T"){l=Ext.Date.add(l,Ext.Date.DAY,1)}}else{l=Ext.Date.add(l,Ext.Date.DAY,1)}m=Ext.Date.format(l,"Ymd");m=m+SF.gv.gShiftInfor.sShift1StartTime;return m}function g(k){var m="";var l=k;if(Ext.typeOf(l)!="date"){return m}if(SF.gv.gShiftInfor.bVariableShift==false){if(SF.gv.gShiftInfor.cShift1DayFlag=="P"){l=Ext.Date.add(l,Ext.Date.DAY,-1)}}m=Ext.Date.format(l,"Ymd");m=m+SF.gv.gShiftInfor.sShift1StartTime;return m}Ext.define("MES.mixin.CommonFunction.Inner",{mixins:["Ext.util.Observable"],toStandardTime:function(k,l){return h(k,l)},getProcTime:function(q,m,l,n,p,o,k){return a(q,m,l,n,p,o)},getExportParams:function(m,k,l){return f(m,k,l)},hexToArgb:function(k){return i(k)},argbToHex:function(k){return c(k)},checkAlarmCount:function(){d()},callService:function(m,l,o,k,n){e(m,l,o,k,n)},callServiceAsync:function(k,m,l){return j(k,m,l)},toShiftDate:function(k){return b(k)},fromShiftDate:function(k){return g(k)}});return{cf:Ext.create("MES.mixin.CommonFunction.Inner")}}());Ext.define("MES.mixin.Constant",function(){SF_TRAN_CODE_CREATE="CREATE";SF_TRAN_CODE_START="START";SF_TRAN_CODE_END="END";SF_TRAN_CODE_MOVE="MOVE";SF_TRAN_CODE_SKIP="SKIP";SF_TRAN_CODE_REWORK="REWORK";SF_TRAN_CODE_REPAIR="REPAIR";SF_TRAN_CODE_REPAIR_END="REPAIR_END";SF_TRAN_CODE_LOCAL_REPAIR="LOCAL_REPAIR";SF_TRAN_CODE_LOSS="LOSS";SF_TRAN_CODE_BONUS="BONUS";SF_TRAN_CODE_SPLIT="SPLIT";SF_TRAN_CODE_MERGE="MERGE";SF_TRAN_CODE_COMBINE="COMBINE";SF_TRAN_CODE_HOLD="HOLD";SF_TRAN_CODE_RELEASE="RELEASE";SF_TRAN_CODE_SHIP="SHIP";SF_TRAN_CODE_RECEIVE="RECEIVE";SF_TRAN_CODE_ADAPT="ADAPT";SF_TRAN_CODE_ATTRIBUTE="ATTRIBUTE";SF_TRAN_CODE_LOTEDC="LOTEDC";SF_TRAN_CODE_RESEDC="RESEDC";SF_TRAN_CODE_SORT="SORT";SF_TRAN_CODE_IN_INV="IN INV";SF_TRAN_CODE_OUT_INV="OUT INV";SF_TRAN_CODE_TRANSFER_INV="TRANS INV";SF_TRAN_CODE_CONV_TO_LOT="CONV TO LOT";SF_TRAN_CODE_CONV_TO_INV="CONV TO INV";SF_TRAN_CODE_CONSUME="CONSUME";SF_TRAN_CODE_SCRAP="SCRAP";SF_TRAN_CODE_REVERSE="REVERSE";SF_TRAN_CODE_SCRIBE="SCRIBE";SF_TRAN_CODE_TERMINATE="TERMINATE";SF_TRAN_CODE_RECREATE="RECREATE";SF_TRAN_CODE_CLEAN="CLEAN";SF_STEP_CREATE="I";SF_STEP_UPDATE="U";SF_STEP_DELETE="D";SF_STEP_CONFIRM="F";SF_STEP_DELETE_FORCE="X";SF_STEP_COPY="C";SF_STEP_UNDELETE="R";SF_STEP_APPROVAL="A";SF_STEP_RELEASE="E";SF_STEP_CANCEL_APPROVAL="P";SF_STEP_SCRAP="S";SF_STEP_RETURN="N";SF_STEP_REGENERATE="G";SF_STEP_VERSION_UP="V";SF_STEP_TERMINATE="M";SF_STEP_TRAN="T";SF_CMF_MATERIAL="CMF_MATERIAL";SF_CMF_FLOW="CMF_FLOW";SF_CMF_OPERATION="CMF_OPER";SF_CMF_STEP="CMF_STEP";SF_CMF_RESOURCE="CMF_RESOURCE";SF_CMF_PORT="CMF_PORT";SF_CMF_CARRIER="CMF_CARRIER";SF_CMF_SUBRESOURCE="CMF_SUBRESOURCE";SF_CMF_USER="CMF_USER";SF_CMF_CHARACTER="CMF_CHARACTER";SF_CMF_COL_SET="CMF_COL_SET";SF_CMF_ORDER="CMF_ORDER";SF_CMF_BOM_SET="CMF_BOM_SET";SF_CMF_RECIPE="CMF_RECIPE";SF_CMF_PART="CMF_PART";SF_CMF_LABEL="CMF_LABEL";SF_CMF_QUEUETIME="CMF_QUEUETIME";SF_CMF_SERVICE="CMF_SERVICE";SF_CMF_INPUT_OPER_VALUE="CMF_INPUT_OPER_VALUE";SF_CMF_LABEL="CMF_LABEL";SF_CMF_SMP_PROC="CMF_SMP_PROC";SF_CMF_INSP_ITEM="CMF_INSP_ITEM";SF_CMF_INSP_SET="CMF_INSP_SET";SF_CMF_LOT="CMF_LOT";SF_CMF_SUBLOT="CMF_SUBLOT";SF_CMF_TRN_ADAPT="CMF_TRN_ADAPT";SF_CMF_TRN_BONUS="CMF_TRN_BONUS";SF_CMF_TRN_LOSS="CMF_TRN_LOSS";SF_CMF_TRN_CREATE="CMF_TRN_CREATE";SF_CMF_TRN_START="CMF_TRN_START";SF_CMF_TRN_END="CMF_TRN_END";SF_CMF_TRN_MOVE="CMF_TRN_MOVE";SF_CMF_TRN_SKIP="CMF_TRN_SKIP";SF_CMF_TRN_REWORK="CMF_TRN_REWORK";SF_CMF_TRN_REPAIR="CMF_TRN_REPAIR";SF_CMF_TRN_REPAIR_END="CMF_TRN_REPAIR_END";SF_CMF_TRN_LOCAL_REPAIR="CMF_TRN_LOCAL_REPAIR";SF_CMF_TRN_SPLIT="CMF_TRN_SPLIT";SF_CMF_TRN_COMBINE="CMF_TRN_COMBINE";SF_CMF_TRN_MERGE="CMF_TRN_MERGE";SF_CMF_TRN_HOLD="CMF_TRN_HOLD";SF_CMF_TRN_RELEASE="CMF_TRN_RELEASE";SF_CMF_TRN_SHIP="CMF_TRN_SHIP";SF_CMF_TRN_RECEIVE="CMF_TRN_RECEIVE";SF_CMF_TRN_ASSEMBLY="CMF_TRN_ASSEMBLY";SF_CMF_TRN_DISASSEMBLE="CMF_TRN_DISASSEMBLE";SF_CMF_TRN_REPLACE="CMF_TRN_REPLACE";SF_CMF_TRN_LOTEDC="CMF_TRN_LOTEDC";SF_CMF_TRN_EVENT="CMF_TRN_EVENT";SF_CMF_TRN_TROUBLE="CMF_TRN_TROUBLE";SF_CMF_TRN_RMA_OPEN="CMF_TRN_RMA_OPEN";SF_CMF_TRN_RMA_CLOSE="CMF_TRN_RMA_CLOSE";SF_CMF_TRN_SORT="CMF_TRN_SORT";SF_CMF_TRN_STORE="CMF_TRN_STORE";SF_CMF_TRN_UNSTORE="CMF_TRN_UNSTORE";SF_CMF_TRN_TERMINATE="CMF_TRN_TERMINATE";SF_CMF_TRN_CHANGE_CMF="CMF_TRN_CHANGE_CMF";SF_CMF_TRN_RESERVE="CMF_TRN_RESERVE";SF_CMF_TRN_UNRESERVE="CMF_TRN_UNRESERVE";SF_CMF_TRN_SCRIBE="CMF_TRN_SCRIBE";SF_CMF_TRN_CV="CMF_TRN_CV";SF_CMF_TRN_REGENERATE="CMF_TRN_REGENERATE";SF_CMF_TRN_START_STEP="CMF_TRN_START_STEP";SF_CMF_TRN_END_STEP="CMF_TRN_END_STEP";SF_CMF_TRN_CHANGE_PORT="CMF_TRN_CHANGE_PORT";SF_CMF_TRN_COLLECT_LOT_DEFECT="CMF_TRN_COLLECT_DFT";SF_CMF_TRN_CLEAN_LOT_DEFECT="CMF_TRN_CLEAN_DFT";SF_CMF_TRN_IN_INV="CMF_TRN_IN_INV";SF_CMF_TRN_OUT_INV="CMF_TRN_OUT_INV";SF_CMF_TRN_TRANS_INV="CMF_TRN_TRANS_INV";SF_CMF_TRN_CONV_TO_LOT="CMF_TRN_CONV_TO_LOT";SF_CMF_TRN_CONV_TO_INV="CMF_TRN_CONV_TO_INV";SF_CMF_TRN_CONSUME="CMF_TRN_CONSUME";SF_CMF_TRN_SCRAP="CMF_TRN_SCRAP";SF_CMF_TRN_QCM_BATCH="CMF_TRN_QCM_BATCH";SF_CMF_TRN_QCM_RESULT="CMF_TRN_QCM_RESULT";SF_CMF_TRN_QCM_FINAL="CMF_TRN_QCM_FINAL";SF_CMF_TRN_QCM_MERGE="CMF_TRN_QCM_MERGE";SF_CMF_TRN_QCM_SPLIT="CMF_TRN_QCM_SPLIT";SF_CMF_CHART_SET="CMF_CHART_SET";SF_CMF_CHART="CMF_CHART";SF_CMF_RULE_RELATION="CMF_RULE_RELATION";SF_CMF_RULE_SEQ_KEY="CMF_RULE_SEQ_KEY";SF_GRP_FLOW="GRP_FLOW";SF_GRP_MATERIAL="GRP_MATERIAL";SF_GRP_OPERATION="GRP_OPER";SF_GRP_STEP="GRP_STEP";SF_GRP_CHARACTER="GRP_CHARACTER";SF_GRP_RESOURCE="GRP_RESOURCE";SF_GRP_COL_SET="GRP_COL_SET";SF_GRP_USER="GRP_USER";SF_GRP_EVENT="GRP_EVENT";SF_GRP_BOM_SET="GRP_BOM_SET";SF_GRP_RECIPE="GRP_RECIPE";SF_GRP_INSP_SET="GRP_INSP_SET";SF_GRP_CHART="GRP_CHART";SF_GRP_CHART_SET="GRP_CHART_SET";SF_GRP_LABEL="GRP_LABEL";SF_GCM_MSGGRP_TBL="MESSAGE_GROUP";SF_GCM_COL_GRP="COL_GRP_";SF_GCM_CHAR_GRP="CHAR_GRP_";SF_GCM_RES_GRP="RES_GRP_";SF_GCM_EVN_GRP="EVN_GRP_";SF_GCM_MATERIAL_GRP="MATERIAL_GRP_";SF_GCM_FLOW_GRP="FLOW_GRP_";SF_GCM_OPER_GRP="OPER_GRP_";SF_GCM_STEP_GRP="STEP_GRP_";SF_GCM_USER_GRP="USER_GRP_";SF_GCM_BOM_GRP="BOM_GRP_";SF_GCM_RECIPE_GRP="RECIPE_GRP_";SF_GCM_INSP_SET_GRP="INSP_SET_GRP_";SF_GCM_CHT_GRP="CHT_GRP_";SF_GCM_CHTSET_GRP="CHTSET_GRP_";SF_GCM_LABEL_GRP="LABEL_GRP_";SF_WIP_CREATE_CODE="CREATE_CODE";SF_WIP_OWNER_CODE="OWNER_CODE";SF_WIP_LOT_TYPE="LOT_TYPE";SF_WIP_SUBLOT_TYPE="SUBLOT_TYPE";SF_WIP_MATERIAL_TYPE="MATERIAL_TYPE";SF_WIP_MATERIAL_PACKTYPE="MATERIAL_PACK_TYPE";SF_WIP_OPTIONAL_FLOW_GROUP="OPTIONAL_FLOW_GROUP";SF_WIP_OPTIONAL_OPER_GROUP="OPTIONAL_OPER_GROUP";SF_WIP_UNIT_TABLE="UNIT";SF_WIP_SHIP_CODE="SHIP_CODE";SF_WIP_LOSS_CODE="LOSS_CODE";SF_WIP_BONUS_CODE="BONUS_CODE";SF_WIP_HOLD_CODE="HOLD_CODE";SF_WIP_REWORK_CODE="REWORK_CODE";SF_WIP_REPAIR_CODE="REPAIR_CODE";SF_WIP_RESULT_CODE="RESULT_CODE";SF_WIP_ACTION_CODE="ACTION_CODE";SF_WIP_RELEASE_CODE="RELEASE_CODE";SF_WIP_ORDER_STATUS="ORDER_STATUS";SF_WIP_TERMINATE_CODE="TERMINATE_CODE";SF_WIP_CV_CODE="CV_CODE";SF_WIP_LOT_DEFECT_CODE="LOT_DEFECT_CODE";SF_WIP_SUBLOT_GRADE="SUBLOT_GRADE";SF_INV_SCRAP_CODE="SCRAP_CODE";SF_RAS_RES_TYPE="RES_TYPE";SF_RAS_SUBRES_TYPE="SUBRES_TYPE";SF_RAS_AREA_CODE="AREA";SF_RAS_SUBAREA_CODE="SUB_AREA";SF_RAS_WORK_POSITION="WORK_POSITION";SF_RAS_CHAMBER_GROUP="CHAMBER_GROUP";SF_RAS_PM_PERIOD="PM_PERIOD";SF_RAS_PM_EVENT="PM_EVENT";SF_RAS_CRR_TYPE1="CRR_TYPE1";SF_RAS_CRR_TYPE2="CRR_TYPE2";SF_RAS_CRR_TYPE3="CRR_TYPE3";SF_ATTR_TYPE_TABLE="ATTRIBUTE_TYPE";SF_RMA_CREATE_CODE="RMA_CREATE_CODE";SF_RMA_RESULT_CODE="RMA_RESULT_CODE";SF_ARCHIVE_MODULE="ARCHIVE_MODULE";SF_SYS_FACTORY_TYPE="FACTORY_TYPE";SF_POP_PRINTER_TYPE="PR ER_TYPE";SF_POP_RESOLUTION="RESOLUTION";SF_POP_TEXT_FONT="TEXT_FONT";SF_POP_BARCODE_FONT="BARCODE_FONT";SF_POP_PRINT_VARIABLE="PRINT_VARIABLE";SF_POP_ROTATE="ROTATE";SF_GCM_CUSTOMER="CUSTOMER";SF_RAS_TOOL_STATUS="TOOL_STATUS";SF_RAS_TOOL_GRP="TOOL_GRP";SF_RAS_TOOL_GRADE="TOOL_GRADE";SF_RAS_TOOL_DEFECT="TOOL_DEFECT";SF_RAS_PORT_STATE="PORT_STATE";SF_QCM_SMP_PROC_TYPE="SMP_PROC_TYPE";SF_QCM_INSP_METHOD="QCM_INSP_METHOD";SF_QCM_DEFECT_GRP="QCM_DEFECT_GRP";SF_QCM_INSP_TYPE="QCM_INSP_TYPE";SF_QCM_VENDOR="QCM_VENDOR";SF_QCM_CUSTOMER="QCM_CUSTOMER";SF_SHEET_QUERY_TYPE="SHEET_QUERY_TYPE";SF_SHEET_SHEET_TYPE="SHEET_SHEET_TYPE";SF_SHEET_DATA_TYPE="SHEET_DATA_TYPE";SF_WFM_NODE_TYPE="WFM_NODE_TYPE";SF_GCM_TABLE_GROUP="GCM_TABLE_GROUP";SF_SEC_FUNCTION_GROUP="FUNCTION_GROUP";SF_SEC_PROGRAM_LIST="PROGRAM_LIST";SF_EDC_UNIT_TABLE="EDC_UNIT";SF_ID_GEN_TYPE="ID_GEN_TYPE";SF_ID_GEN_TRAN_CODE="ID_GEN_TRAN_CODE";SF_BATCH_TYPE="BATCH_TYPE";SF_FUNC_KEY_TYPE="FUNC_KEY_TYPE";SF_FAC_OA_SERVICES="FAC_OA_SERVICES";SF_BIN_DATA_1="__BIN_DATA_1";SF_BIN_DATA_2="__BIN_DATA_2";SF_BIN_DATA_3="__BIN_DATA_3";SF_BIN_DATA_4="__BIN_DATA_4";SF_BIN_DATA_5="__BIN_DATA_5";SF_BIN_DATA_6="__BIN_DATA_6";SF_BIN_DATA_7="__BIN_DATA_7";SF_BIN_DATA_8="__BIN_DATA_8";SF_BIN_DATA_9="__BIN_DATA_9";SF_BIN_DATA_10="__BIN_DATA_10";SF_SCREEN_GRP="SCREEN_GROUP";SF_FMB_HOST_INFO="FMB_HOST_INFO";SF_RESOURCE_STATUS_WAIT="WAIT";SF_RESOURCE_STATUS_PROC="PROC";SF_DEFAULT_RESOURCE_STATUS="WAIT";SF_RES_UP_FLAG="U";SF_RES_DOWN_FLAG="D";SF_DEFAULT_RES_UP_DOWN_FLAG="U";SF_LOT_STATUS_WAIT="WAIT";SF_LOT_STATUS_PROC="PROC";SF_LOT_STATUS_RESV="RESV";SF_UNIT_COUNT_MAX=500;SF_VALUE_COUNT_MAX=1000;MESSAGE_INDEX=34;MESSAGE_OPEN_ICON_INDEX=51;MESSAGE_CLOSE_ICON_INDEX=52;SF_PRV_TYPE_RES="RESOURCE";SF_PRV_TYPE_OPER="OPERATION";SF_PRV_TYPE_GCMTBL="GCMTABLE";SF_PRV_TYPE_SERVICE="SERVICE";SF_PRV_TYPE_ATTR="ATTRIBUTE";POP_TYPE_TEXT="T";POP_TYPE_BARCODE="B";POP_TYPE_IMAGE="I";POP_TYPE_GRAPHIC="G";POP_ROTATE_NORMAL="N";POP_ROTATE_ROTATED="R";POP_ROTATE_INVERTED="I";POP_ROTATE_BOTTOMUP="B";POP_BAR_FONT_128="C";POP_BAR_FONT_3OF9="3";POP_BAR_FONT_PDF417="7";POP_BAR_FONT_EAN_8="8";POP_BAR_FONT_UPC_E="9";POP_BAR_FONT_EAN_13="E";POP_BAR_FONT_UPC_A="U";POP_PRINT_PORT_LPT="LPT";POP_PRINT_PORT_COM="COM";STX=2;ETX=3;CR=13;LF=10;HT=9;s_PrtStatus="";b_InputSTX="";i_BufFull=50;s_TimeOut="05";PRINT_200_DPM=8;PRINT_300_DPM=12;PROMPT_ASCII="A";PROMPT_NUMBER="N";PROMPT_FLOAT="F";SF_ALM_NORMAL="N";SF_ALM_RESOURCE="R";SF_ALM_AUTO_GATHER="A";SF_ALM_LEVEL_INFO="I";SF_ALM_LEVEL_WARN="W";SF_ALM_LEVEL_ERROR="E";SF_ALM_TRAN_START="S";SF_ALM_TRAN_SPLIT="P";SF_ALM_TRAN_END="E";SF_ALM_TRAN_REWORK="R";SF_QCM_SMP_TYPE_MANUAL="MN";SF_QCM_SMP_TYPE_TOTAL_INSPECTION="TI";SF_QCM_SMP_TYPE_FIXED_SAMPLE="FS";SF_QCM_SMP_TYPE_USED_PERCENTAGE="UP";SF_QCM_SMP_TYPE_USED_SCHEME="US";SF_QCM_INSP_TYPE_IQC="IQC";SF_QCM_INSP_TYPE_PQC="PQC";SF_QCM_INSP_TYPE_OQC="OQC";SF_QCM_INSP_TYPE_RMA="RMA";SF_QCM_INSP_METHOD_I="INDIVIDUAL";SF_QCM_INSP_METHOD_Q="QUANTITY";SF_QCM_DECISION_REJECT="REJECT";SF_QCM_DECISION_ACCEPT="ACCEPT";SF_SUBLOT_GOOD_GRADE="G";SF_SUBLOT_SCRAP_GRADE="S";SF_MFO_EXT_LOSS_TBL_DEF="EXT_LOSS_TBL_DEF";SF_MFO_EXT_BONUS_TBL_DEF="EXT_BONUS_TBL_DEF";SF_MFO_EXT_LOT_DEFECT_TBL="EXT_LOT_DEFECT_TBL";ARC_SOURCE_DELETE="D";ARC_SOURCE_UNDELETE="U";ARC_ROLLBACK_USE="R";ARC_ROLLBACK_NOTUSE="N";ARC_RUNNING="Y";ARC_BACKUP_FILE="F";ARC_BACKUP_DB="D";ARC_BACKUP_FILE_DB="B";SF_AUTO_REFRESH_TIME=30;ADM_IDLE_STATUS=0;ADM_REQUEST_STATUS=1;ADM_REPLY_STATUS=2;ADM_MAX_REQUEST_CNT=1000;SF_GCM_SERVER_LIST="SERVER_LIST";SF_LOCAL_HOST="LOCALHOST";SF_DEFAULT_IP="DEFAULT";SF_ATTR_TYPE_LOT="LOT";SF_ATTR_TYPE_RESOURCE="RESOURCE";SF_ATTR_TYPE_SUBLOT="SUBLOT";SF_ATTR_TYPE_BOM="BOM";SF_ATTR_TYPE_MATERIAL="MATERIAL";SF_ATTR_TYPE_FLOW="FLOW";SF_ATTR_TYPE_OPER="OPER";SF_ATTR_TYPE_FACTORY="FACTORY";SF_ATTR_TYPE_CARRIER="CARRIER";SF_CONVERT_DATE_FORMAT="DATE";SF_CONVERT_HYPHENDATE_FORMAT="HYPHENDATE";SF_CONVERT_SLASHDATE_FORMAT="SLASHDATE";SF_CONVERT_NODAYDATE_FORMAT="NODAYDATE";SF_CONVERT_TIME_FORMAT="TIME";SF_CONVERT_DATETIME_FORMAT="DATETIME";SF_CONVERT_YEAR_FORMAT="YEAR";SF_CONVERT_MONTH_FORMAT="MONTH";EXCEL_MAX_COL=255;SF_MAX_SLOT_CNT=1000;SF_MAX_BATCH_CNT=12;SF_SYS_DOCK_MENU="SYS_MENU_MENU";SF_SYS_DOCK_FAVORITES="SYS_MENU_FAVORITES";SF_SYS_DOCK_OPERATION="SYS_MENU_OPERATION";SF_SYS_DOCK_RESOURCE="SYS_MENU_RESOURCE";SF_SYS_DOCK_DISPATCHER="SYS_MENU_DISPATCHER";SF_SYS_DOCK_WORKFLOW="SYS_MENU_MODELER";SF_SYS_DOCK_BBS="SYS_MENU_BBS";SF_SYS_DOCK_FMB="SYS_MENU_FMB";SP_MAX_COLUMN_WIDTH=500;SP_MIN_COLUMN_WIDTH=20;LV_MAX_COLUMN_WIDTH=500;LV_MIN_COLUMN_WIDTH=50;LV_MAX_LIST_COUNT=20;LV_BONUS_LISTVIEW_HEIGHT=2;LV_BONUS_COLUMN_WIDTH=4;LV_BONUS_COLUMN_WIDTH_WITH_IMAGE=2;SF_MAX_QTY=9999999.999;SF_MIN_QTY=-9999999.999;SF_DONT_CHECK_PASSWORD="DO_NOT_CHECK_PASSWORD";SF_MAX_GDI_COUNT=8000;SF_MAX_INT=Math.pow(2,31)-1;return{}}());Ext.define("MES.mixin.Variable",{gv:{gsClientVersion:"",gsServerVersion:"",gsUpgradeFile:"",gsDownloadFileList:"",gsHelpUrl:"",gsDefaultHelpUrl:"",giTimeOut:"",giLogOutTime:"",giVersionCheckTime:"",giIdleTime:"",gsDateDelimiter:"/",gsServerName:"MESServer",gsSiteId:"",gbAutoRefresh:false,giAutoRefreshTime:300,gbListAutoRefresh:true,gsRemoteAddress:"",gsRvService:"",gsRvNetwork:"",gbExitFlag:"",gsComputerName:"",gsFactory:"",gsUserID:"",gsPassword:"",gsPassport:"",gbShowMsgFlag:true,gsReturnLotId:"",gsWorkDate:"",gsCentralFactory:"SYSTEM",gbGridFlag:true,gbLoginFlag:false,gbLogoutFlag:false,gcLanguage:"1",gcAutoUpgrade:"1",gbUseSmallLetter:true,gbShowMessagePanel:"",gsMessage:"",gsUserGroup:"",gsDepartment:"",gsUserAreaId:"",gsUserSubAreaId:"",gsProgramId:"",gsMessageData:[],giMaxMessageData:1000,gbProcessCaster:false,giMessageSize:8,gcChangePassword:"",giRequestReplyWaitTime:10,gaMenuLanguage:[],gaButtonLanguage:[],gaTextLanguage:[],gsCurrentLotId:"",giCurrentHistSeq:"",gsCurrentResId:"",gaSelectLotId:[],gbBOMPartList:"",gbCharList:"",gbCharSetList:"",gbMaterialList:"",gbResourceList:"",gbFlowList:"",gbOperList:"",gbUserList:"",gShiftInfor:{bVariableShift:true,iShiftCount:0,cShift1DayFlag:"",sShift1StartTime:"",cShift2DayFlag:"",sShift2StartTime:"",cShift3DayFlag:"",sShift3StartTime:"",cShift4DayFlag:"",sShift4StartTime:""},gsAlarmType:"ALM",gsCurrentCrrId:"",gsCurrentToolId:"",gsCurrentToolType:"",gaWarningMsg:[],gbFavoriteChangeForLotListMain:"",gbFavoriteChangeForResourceListMain:"",gCookieContainer:null,sqlSyntax:["SELECT","*","FROM","WHERE","ORDER","AND","OR","IN","GROUP","BY","NOT","AS","DISTINCT","=","<>","LIKE"],fieldConstant:["MAT_ID","MAT_VER","FLOW","OPER","RES_TYPE","RESG_ID","RES_ID","LOT_ID"],gsTableName:""}});Ext.define("MES.view.form.field.CodeViewField",{extend:"Ext.form.FieldContainer",alias:"widget.codeview",cls:"codeView",layout:{type:"hbox",align:"top"},defaults:{margins:"0 3 0 0"},labelWidth:100,fieldWidth:150,width:this.labelWidth+this.fieldWidth+5,constructor:function(a){var b=a||{};this.callParent([b])},initComponent:function(){this.width=this.width||(this.labelWidth+this.fieldWidth+5);this.callParent();var a=this;if(this.alignIcon){if(this.alignIcon=="left"){this.add(this.buildSerach());this.add(this.buildTxtfield())}else{if(Ext.typeOf(this.alignIcon)=="number"&&this.alignIcon>0){this.add(this.buildTxtfield(this.alignIcon))}}}else{this.add(this.buildTxtfield());this.add(this.buildSerach())}this.addEvents("clickicon","select","change","changetext","specialkey","disabledicon","disabledfield");this.on("disable",function(){a.sub("btnCodeView").setDisabled(true)});this.on("enable",function(){a.sub("btnCodeView").setDisabled(false)});this.on("disabledicon",function(b){a.sub("btnCodeView").setDisabled(b)});this.on("disabledfield",function(c,b){var d=a.sub(a.fields[b].itemId);if(d){d.setDisabled(c)}})},setDisabled:function(b,a){if(a==null){return this[b?"disable":"enable"]()}else{if(this.isDisabled()==true){return false}else{if(a=="icon"){this.fireEvent("disabledicon",b)}else{if(Ext.typeOf(a)=="number"&&a<this.fields.length&&a>-1){this.fireEvent("disabledfield",b,a)}else{Ext.log("error(setDisabled) : [opt]")}}}}},buildTxtfield:function(h){var c=SmartFactory.codeview.get(this.codeviewName)||{};var a=this.submitValue==false?false:true;var f=Ext.clone(this.fields||c.fields||[]);var b=[],l=[];if(this.name!=undefined){if(Ext.typeOf(this.name)=="string"){b=[this.name]}else{if(Ext.typeOf(this.name)=="array"){b=Ext.clone(this.name)}}}if(this.value!=undefined){if(Ext.typeOf(this.value)=="string"){l=[this.value]}else{if(Ext.typeOf(this.value)=="array"){l=Ext.clone(this.value)}}}var d=b.length==0?1:b.length;if(f.length==0){f=[];var m=this.popupConfig||{};Ext.applyIf(m,c.popupConfig);if(m.columns){for(var e=0;e<d;e++){var k=m.columns[e].dataIndex;f=[{column:k,flex:1}]}}}var j=[];var g=0;for(var e in f){if(h==e){g++;j[e]=this.buildSerach()}Ext.applyIf(f[e],{xtype:"textfield",listeners:{specialkey:function(n,o){var i=n.up("fieldcontainer");i.fireEvent("specialkey",n,o);if(o.getKey()!=o.ENTER){return}if(n.disabledEnter!==true){SmartFactory.codeview.show(i)}},change:function(p,q,n,o){var i=p.up("fieldcontainer");i.fireEvent("changetext",p,q,n,p.fieldIndex)}},fieldIndex:e,flex:1});f[e].itemId=f[e].column;j[g]=f[e];if(f[e].width){delete j[g].flex}if(b[e]){j[g].name=b[e]}if(this.submitValue!=undefined){j[g].submitValue=a}if(this.disabledEnter!=undefined){j[g].disabledEnter=this.disabledEnter}if(this.readOnly!=undefined){j[g].readOnly=this.readOnly}if(this.allowBlank!=undefined){j[g].allowBlank=this.allowBlank}if(l[e]){j[g].value=l[e]}g++}this.fields=f;if(h>j.length){j.push(this.buildSerach())}return j},buildSerach:function(){var a=this.disabledIcon||this.disabled||false;var b=this.hiddenIcon||this.hidden||false;return{xtype:"button",itemId:"btnCodeView",iconCls:"btnCodeView",disabled:a,hidden:b,handler:function(){var c=this.up("fieldcontainer");SmartFactory.codeview.show(c);c.fireEvent("clickicon",c)}}},selectedCallback:function(j,d){var c=0;var h=[];var k=[];var e=j.fields;for(var b in e){var f=j.getComponent(e[b].column);var g=f.getValue();var a=d.get(e[b].column);f.setValue(a);if(g!==a){c++}h.push(g);k.push(a)}if(c>0){j.fireEvent("change",j,k,h,"selected")}j.fireEvent("select",d)},getField:function(b){var c=b||0;var a=this.fields[c].column;var d=this.getComponent(a);return d},getFields:function(){var a=[];for(var c in this.fields){var b=this.fields[c].column;var d=this.getComponent(b);a.push(d)}return a},setValue:function(h,d){if(!d){d=0}var c=0;var j=[];var k=[];for(var b in this.fields){var e=this.fields[b].column;var f=this.getComponent(e);var g=f.getValue();var a=b==d?h:g;if(g!==a){f.setRawValue(a);c++}j.push(g);k.push(a)}if(c>0){this.fireEvent("change",this,k,j,"setvalue")}},setValues:function(g){if(Ext.typeOf(g)!="array"&&g!=""){return}else{if(Ext.typeOf(g)=="array"&&g.length==0){return}}var h=[];var j=[];var c=0;for(var b in this.fields){var d=this.fields[b].column;var e=this.getComponent(d);var f=e.getValue();var a="";if(g!=""){a=g[b]==undefined?f:g[b]}if(f!==a){e.setRawValue(a);c++}h.push(f);j.push(a)}if(c>0){this.fireEvent("change",this,j,h,"setvalue")}},getValue:function(b){var c=b||0;var a=this.fields[c].column;var d=this.sub(a).getValue();return d},getValues:function(){var b=[];for(var c in this.fields){var a=this.fields[c].column;var d="";if(this.getComponent(a)){d=this.getComponent(a).getValue()}b.push(d)}return b},getSubmitValue:function(b){var c=b||0;var a=this.fields[c].column;var d=this.getComponent(a).getSubmitValue();return d}});Ext.define("MES.view.form.field.CodeViewColumn",{extend:"Ext.grid.column.Column",alias:"widget.codeviewcolumn",sortable:false,align:"center",resizable:false,hideable:false,menuDisabled:true,header:"&#160;",sortable:false,actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",header:"&#160;",constructor:function(c){var j=this;var g=Ext.apply({},c);if(g.targetColumn==undefined||g.targetColumn.length==0){throw new Error("[targetColumn] should be configured.");return}var b=SF.codeview.get(g.codeviewName);var a=[];var f=[];if(Ext.typeOf(g.targetColumn)=="string"){a=[g.targetColumn]}else{if(Ext.typeOf(g.targetColumn)=="array"){a=Ext.clone(g.targetColumn)}else{throw new Error("[name] is unknow type.")}}if(g.fields==undefined&&b.fields==undefined){for(var e=0;e<a.length;e++){g.popupConfig=g.popupConfig||{};Ext.applyIf(g.popupConfig,b.popupConfig);var k=g.popupConfig.columns[e].dataIndex;f=[{column:k}]}}else{f=Ext.clone(g.fields||b.fields)}for(var e in f){if(a[e]){f[e].name=a[e]}}g.fields=f;j.table=g.table||b.table||"";var h=[{iconCls:"btnCodeViewBorder",handler:function(n,p,l){var o=this;var i=n.getStore().getAt(p);if(g.dataIndex){o.table=i.get(g.dataIndex)}o.record=i;SF.codeview.show(o)}}];g.width=24;delete g.items;j.callParent([g]);j.items=h;var d=h.length,e,m;j.renderer=function(o,q,l,p,r,n,i){if(Ext.typeOf(o)=="string"&&Ext.String.trim(o)==""&&!j.table){return""}if(Ext.isFunction(j.disabledIcon)&&j.disabledIcon(l)==true){return""}if(j.disabledIcon==true){return""}o=Ext.isFunction(g.renderer)?g.renderer.apply(this,arguments)||"":"";q.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(e=0;e<d;e++){m=h[e];m.disable=Ext.Function.bind(j.disableAction,j,[e]);m.enable=Ext.Function.bind(j.enableAction,j,[e]);o+='<img alt="'+(m.altText||j.altText)+'" src="'+(m.icon||Ext.BLANK_IMAGE_URL)+'" class="'+Ext.baseCSSPrefix+"action-col-icon "+Ext.baseCSSPrefix+"action-col-"+String(e)+" "+(m.disabled?Ext.baseCSSPrefix+"item-disabled":" ")+(m.iconCls||"")+" "+(Ext.isFunction(m.getClass)?m.getClass.apply(m.scope||j.scope||j,arguments):(j.iconCls||""))+'"'+((m.tooltip)?' data-qtip="'+m.tooltip+'"':"")+" />"}return o}},enableAction:function(a){var b=this;if(!a){a=0}else{if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=false;b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).removeCls(b.disabledCls)},disableAction:function(a){var b=this;if(!a){a=0}else{if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=true;b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).addCls(b.disabledCls)},destroy:function(){delete this.items;delete this.renderer;return this.callParent(arguments)},processEvent:function(f,i,j,a,g,c){var d=this,b=c.getTarget().className.match(d.actionIdRe),k,h;if(b){k=d.items[parseInt(b[1],10)];if(k){if(f=="click"){h=k.handler||d.handler;if(h&&!k.disabled){h.call(k.scope||d.scope||d,i,a,g,k,c)}}else{if(f=="mousedown"&&k.stopSelection!==false){return false}}}}return d.callParent(arguments)},cascade:function(b,a){b.call(a||this,this)},getRefItems:function(){return[]},selectedCallback:function(a,b){if(a.fields==undefined||a.fields.length==0){throw new Error("[fields] should be configured.")}for(var c in a.fields){var d=a.fields[c];if(d.name){a.record.set(d.name,b.get(d.column))}}}});Ext.define("MES.view.form.field.UserStamp",{extend:"Ext.container.Container",alias:"widget.userstamp",cls:"userStamp",initComponent:function(){var c={xtype:"textfield",labelSeparator:"",labelWidth:120,submitValue:false,readOnly:true};if(this.fieldDefaults!=undefined){c=Ext.Object.merge(c,this.fieldDefaults)}this.showOption=this.showOption||{};var d=this.zcreateid();var i=this.zcreatetime();var j=this.zupdateid();var f=this.zupdatetime();var b=this.zdeleteid();var e=this.zdeletetime();var g={};var h={};var a={};if(this.showOption.layout=="anchor"){d.fieldLabel=T("Caption.Other.Create User");i.fieldLabel=T("Caption.Other.Create Time");j.fieldLabel=T("Caption.Other.Update User");f.fieldLabel=T("Caption.Other.Update Time");b.fieldLabel=T("Caption.Other.Delete User");e.fieldLabel=T("Caption.Other.Delete Time");g={xtype:"container",layout:"anchor",defaults:c,items:[d,i]};h={xtype:"container",layout:"anchor",defaults:c,items:[j,f]};a={xtype:"container",layout:"anchor",defaults:c,items:[b,e]}}else{c.flex=1;d.fieldLabel=T("Caption.Other.Create User/Time");i.cls="marginL5";j.fieldLabel=T("Caption.Other.Update User/Time");f.cls="marginL5";b.fieldLabel=T("Caption.Other.Delete User/Time");e.cls="marginL5";g={xtype:"container",layout:"hbox",defaults:c,items:[d,i]};h={xtype:"container",layout:"hbox",defaults:c,items:[j,f]};a={xtype:"container",layout:"hbox",defaults:c,items:[b,e]}}switch(this.showOption.display){case"CUD":this.items=[g,h,a];break;default:this.items=[g,h];break}this.callParent()},zcreateid:function(){return{xtype:"textfield",name:"createUserId"}},zcreatetime:function(){return{xtype:"textfield",name:"createTime"}},zupdateid:function(){return{xtype:"textfield",name:"updateUserId"}},zupdatetime:function(){return{xtype:"textfield",name:"updateTime"}},zdeleteid:function(){return{xtype:"textfield",name:"deleteUserId"}},zdeletetime:function(){return{xtype:"textfield",name:"deleteTime"}}});Ext.define("MES.view.form.field.ColorField",{extend:"Ext.form.field.Trigger",alias:"widget.colorfield",editable:false,onTriggerClick:function(a){this.fireEvent("triggerclick",a)},getValue:function(){var a=SF.cf.hexToArgb(this.value);return a},getFontColor:function(){return this.fonColor},setValue:function(a){if(a){if(Ext.typeOf(a)=="number"){a="#"+SF.cf.argbToHex(a)}var d=Ext.draw.Color.fromString(a);var b="";if(d.getHSL()[2]<0.5){b="#FFFFFF"}else{b="#000000"}this.setFieldStyle("background-color: "+a+"; background-image: none; color : "+b+";")}else{this.setFieldStyle("background-color: #FFFFFF; background-image: none;")}Ext.form.field.Trigger.superclass.setValue.call(this,a)},initComponent:function(){var a={},b=this;Ext.apply(this,Ext.apply(this.initialConfig,a));this.callParent(arguments);b.on("triggerclick",function(d){var c=Ext.create("Ext.menu.ColorPicker",{listeners:{select:function(f,e){b.setValue("#"+e)}}});c.showAt(d.getXY())},this)}});Ext.define("MES.view.form.field.GCMComboBox",{extend:"Ext.form.field.ComboBox",alias:["widget.gcmcombobox","widget.gcmcombo"],queryMode:"local",enableKeyEvents:true,constructor:function(c){var g=c||{};g=SmartFactory.codeview.show(g,"combo");if(!g.table){throw new Error("[table] should be configured.")}var a=[g.displayField];if(g.valueField!=g.displayField){a.push(g.valueField)}if(g.listTpl){var f=/(\{\w+\})/g;while(true){var d=f.exec(g.listTpl);if(!d){break}var e=d[1].replace(/\{|\}/g,"");a.push(e)}}a=Ext.Array.unique(a);this.params={procstep:"1",type:g.type,select:a,table:g.table};if(g.factory){this.params.factory=g.factory}if(g.order){this.params.order=g.order}if(g.condition&&g.condition.length>0){this.params.condition=g.condition}var b={listTpl:g.listTpl,autoLoad:true,remoteFilter:false,filterOnLoad:false,fields:this.params.select,proxy:{type:"payload",api:{read:"service/basViewCodeList.json"},actionMethods:{read:"POST"},extraParams:this.params,reader:{type:"json",root:"list",totalProperty:"total"}}};if(g.pageSize!=undefined&&g.pageSize>1){b.pageSize=g.pageSize}g.store=Ext.create("Ext.data.Store",b);this.callParent([g])},initComponent:function(){this.callParent()},listConfig:{getInnerTpl:function(){var a=this.store.listTpl||"{key1}";return'<div><span class="key">'+a+"</span></div>"},minWidth:200},onTriggerClick2:function(){var b=this;if(!b.readOnly&&!b.disabled){var c=b.getRawValue();b.onFocus({});if(b.triggerAction==="all"||b.isExpanded!=true){c=""}b.expand();if(b.getRawValue()!=b.getDisplayValue()||c==""||b.selectValue==""){b.selectValue=c;if(b.condition&&b.condition.length>0){b.params.condition=b.condition}else{b.params.condition=[]}b.params.condition.push({name:b.displayField,value:c+"%",operator:"like"});var a={query:"",forceAll:true,combo:b,cancel:false};if(b.fireEvent("beforequery",a)===false||a.cancel){return false}b.store.load({params:b.params});if(b.getRawValue()!==b.getDisplayValue()){b.ignoreSelection++;b.picker.getSelectionModel().deselectAll();b.ignoreSelection--}}b.inputEl.focus()}}});Ext.require(["Ext.ux.exporter.Exporter"]);Ext.define("MES.view.form.field.BaseButtons",{extend:"Ext.toolbar.Toolbar",alias:["widget.basebuttons","widget.mes_view_basebuttons"],dock:"bottom",defaults:{minWidth:75},ui:"footer",initComponent:function(){this.buttonsOpt=this.buttonsOpt||{};var g=[];var h=0;Ext.Array.each(this.buttonsOpt,function(j,i,k){j=j||{};j.params=j.params||{};j.result=j.result||{};if(this.ctrlList){if(this.ctrlList[j.itemId]&&this.ctrlList[j.itemId]!="Y"){f=true}}switch(j.itemId){case"btnVersionUp":Ext.applyIf(j.params,{procstep:SF_STEP_VERSION_UP});if(j.confirm){Ext.applyIf(j.confirm,{title:T("Caption.Button.Version Up"),msg:T("Message.Version Up")})}Ext.applyIf(j.result,{showSuccess:true,showFailure:true});this.zbtnversionup.userConfig=j;g.push(this.zbtnversionup);break;case"btnCreate":Ext.applyIf(j.params,{procstep:SF_STEP_CREATE});if(j.confirm){Ext.applyIf(j.confirm,{title:T("Caption.Button.Create"),msg:T("Message.Create")})}Ext.applyIf(j.result,{showSuccess:true,showFailure:true});this.zbtncreate.userConfig=j;g.push(this.zbtncreate);break;case"btnUpdate":Ext.applyIf(j.params,{procstep:SF_STEP_UPDATE});if(j.confirm){Ext.applyIf(j.confirm,{title:T("Caption.Button.Update"),msg:T("Message.Update")})}Ext.applyIf(j.result,{showSuccess:true,showFailure:true});this.zbtnupdate.userConfig=j;g.push(this.zbtnupdate);break;case"btnDelete":Ext.applyIf(j.params,{procstep:SF_STEP_DELETE});if(j.confirm){Ext.applyIf(j.confirm,{title:T("Caption.Button.Delete"),msg:T("Message.Delete")})}Ext.applyIf(j.result,{showSuccess:true,showFailure:true});this.zbtndelete.userConfig=j;g.push(this.zbtndelete);break;case"btnView":this.zbtnview.userConfig=j;g.push(this.zbtnview);break;case"btnProcess":Ext.applyIf(j.params,{procstep:"1"});if(j.confirm){Ext.applyIf(j.confirm,{title:T("Caption.Button.Process"),msg:T("Message.Process")})}Ext.applyIf(j.result,{showSuccess:true,showFailure:true});this.zbtnprocess.userConfig=j;g.push(this.zbtnprocess);break;case"btnRefresh":this.zbtnrefresh.userConfig=j;g.push(this.zbtnrefresh);break;case"btnClose":this.zbtnclose.userConfig=j;break;case"tbfill":h++;this.zfill.userConfig={};g.push(this.zfill);break;case"btnExport":this.zbtnexport.userConfig=j;g.push(this.zbtnexport);break;case"btnExportx":this.zbtnexportx.userConfig=j;this.zbtnexportx.downloadName=j.fileName;g.push(this.zbtnexportx);break}},this);if(h==0){this.zfill.userConfig={};g.unshift(this.zfill)}this.zbtnclose.userConfig=this.zbtnclose.userConfig||{};g.push(this.zbtnclose);this.items=g;this.callParent();var b=this;this.addEvents({beforeVersionUp:true,beforeCreate:true,beforeUpdate:true,beforeDelete:true,beforeProcess:true,beforeClose:true,beforeExport:true,afterVersionUp:true,afterCreate:true,afterUpdate:true,afterDelete:true,afterProcess:true,afterView:true,afterClose:true,afterRefresh:true});for(var d in this.items.items){var e=this.items.getAt(d);var f=!!e.userConfig.disabled;e.disabled=f;var c=!!e.userConfig.hidden;e.hidden=c;var a=e.userConfig.text;if(a){e.text=a}e.on("click",function(o,m,n){var l=o.userConfig.confirm;if(l){var p=l.title||T("Caption.Other.Confirm");var k=l.msg||T("Message.10");if(l.fields){var j=b.getClientForm().getFieldValues();for(var q in l.fields){k=k.replace("{"+q+"}",j[l.fields[q]])}}Ext.MessageBox.confirm(p,k,function i(r){if(r=="yes"){b.itemAction(o)}})}else{b.itemAction(o)}});e.on("enable",function(j,i){if(b.ctrlList&&b.ctrlList[j.itemId]!=undefined&&b.ctrlList[j.itemId]!="Y"){j.setDisabled(true)}})}this.getSecControl(this)},getClientForm:function(){if(!this.clientForm){this.clientForm=this.up("form").getForm()}return this.clientForm},getBaseFormPanel:function(){if(!this.baseFormPanel){this.baseFormPanel=this.up("form")}return this.baseFormPanel},setClientForm:function(a){this.clientForm=a},setBaseFormPanel:function(a){this.baseFormPanel=a},setSecControl:function(a){var b=a.items.items;if(a.ctrlList&&b!={}&&b.length>0){for(var c in b){var d=b[c].itemId;if(a.ctrlList[d]!=undefined&&a.ctrlList[d]!="Y"){b[c].setDisabled(true)}}}},getSecControl:function(c){if(!c.funcName){return}var d={procstep:"1",programId:"WEBClient",funcName:this.funcName};var b="secViewFunctionDetail";var a=function(g,f){g.ctrlList={};if(f.result.success!=true){return}for(var h=1;h<=10;h++){var e=f.result["ctlName"+h];if(e){g.ctrlList[e]=f.result["ctlEnFlag"+h]||""}}g.setSecControl(g)};Ext.Ajax.request({url:"service/"+b+".json",method:"GET",params:d,success:function(f,g){var e=Ext.JSON.decode(f.responseText);f.result=e||{};f.params=f.request.options.params||{};if(e.success!==true){SmartFactory.msgRtn("failure",e)}if(Ext.typeOf(a)=="function"){a(c,f)}},failure:function(e,f){Ext.log("failure");Ext.log(e)},scope:c})},onBtnVersionUp:function(c,b,a){a.getClientForm().submit({params:c,url:b.url,success:function(d,e){if(b.result.showSuccess){a.showVersionupMsg(e)}a.fireEvent("afterVersionUp",d,e,true)},failure:function(d,e){if(b.result.showFailure){a.showVersionupMsg(e)}a.fireEvent("afterVersionUp",d,e,false)}})},onBtnCreate:function(c,b,a){a.getClientForm().submit({params:c,url:b.url,success:function(d,e){if(b.result.showSuccess){a.showCreateMsg(e)}a.fireEvent("afterCreate",d,e,true)},failure:function(d,e){if(b.result.showFailure){a.showCreateMsg(e)}a.fireEvent("afterCreate",d,e,false)}})},onBtnUpdate:function(c,b,a){a.getClientForm().submit({params:c,url:b.url,success:function(d,e){if(b.result.showSuccess){a.showUpdateMsg(e)}a.fireEvent("afterUpdate",d,e,true)},failure:function(d,e){if(b.result.showFailure){a.showUpdateMsg(e)}a.fireEvent("afterUpdate",d,e,false)}})},onBtnDelete:function(c,b,a){a.getClientForm().submit({params:c,url:b.url,success:function(d,e){if(b.result.showSuccess){a.showDeleteMsg(e)}a.fireEvent("afterDelete",d,e,true)},failure:function(d,e){if(b.result.showFailure){a.showDeleteMsg(e)}a.fireEvent("afterDelete",d,e,false)}})},onBtnClose:function(a){a.fireEvent("afterClose")},onBtnProcess:function(c,b,a){a.getClientForm().submit({params:c,url:b.url,success:function(d,e){if(b.result.showSuccess){a.showProcessMsg(e)}a.fireEvent("afterProcess",d,e,true)},failure:function(d,e){if(b.result.showFailure){a.showProcessMsg(e)}a.fireEvent("afterProcess",d,e,false)}})},onExportGrid:function(e,d,f,b,a){var c=null;if(Ext.typeOf(d)=="string"){c=e.sub(d)}f=SF.cf.getExportParams(e.title,c,f);if(!f){Ext.Msg.alert("Error","Grid is undefined");return false}Ext.Ajax.request({url:b,params:f||{},form:e.downloadForm,isUpload:true,failure:function(g,h){Ext.log("failure");Ext.log(g)},scope:e})},showVersionupMsg:function(a){if(a.result!=undefined&&a.result.success===true){this.sucessSubmitMsg(a)}else{this.errorSubmitMsg(a)}},showCreateMsg:function(a){if(a.result!=undefined&&a.result.success===true){this.sucessSubmitMsg(a)}else{this.errorSubmitMsg(a)}},showUpdateMsg:function(a){if(a.result!=undefined&&a.result.success===true){this.sucessSubmitMsg(a)}else{this.errorSubmitMsg(a)}},showDeleteMsg:function(a){if(a.result!=undefined&&a.result.success===true){this.sucessSubmitMsg(a)}else{this.errorSubmitMsg(a)}},showProcessMsg:function(a){if(a.result!=undefined&&a.result.success===true){this.sucessSubmitMsg(a)}else{this.errorSubmitMsg(a)}},sucessSubmitMsg:function(a){SF.msgRtn(a.result.msgcode,a)},errorSubmitMsg:function(a){var b="failure";if(a.result){b=a.result.msgcode}SF.msgRtn(b,a)},itemAction:function(c){var a=this;var b=a.getClientForm();var d=a.getBaseFormPanel();var e=Ext.clone(c.userConfig.params)||{};switch(c.itemId){case"btnVersionUp":if(a.fireEvent("beforeVersionUp",b,e,c.userConfig.url)!==false){a.onBtnVersionUp(e,c.userConfig,a)}break;case"btnCreate":if(a.fireEvent("beforeCreate",b,e,c.userConfig.url)!==false){a.onBtnCreate(e,c.userConfig,a)}break;case"btnUpdate":if(a.fireEvent("beforeUpdate",b,e,c.userConfig.url)!==false){a.onBtnUpdate(e,c.userConfig,a)}break;case"btnDelete":if(a.fireEvent("beforeDelete",b,e,c.userConfig.url)!==false){a.onBtnDelete(e,c.userConfig,a)}break;case"btnClose":if(a.fireEvent("beforeClose")!==false){a.onBtnClose(a)}break;case"btnProcess":if(a.fireEvent("beforeProcess",b,e,c.userConfig.url)!==false){a.onBtnProcess(e,c.userConfig,a)}break;case"btnRefresh":a.fireEvent("afterRefresh",b);break;case"btnView":a.fireEvent("afterView",b);break;case"btnExport":if(a.fireEvent("beforeExport",d,e,c.userConfig.url)!==false){a.onExportGrid(d,c.userConfig.targetGrid,e,c.userConfig.url,a)}break}},addItem:function(b,a){if(!a){return}if(a.itemId&&this.ctrlList&&this.ctrlList[a.itemId]!=undefined&&this.ctrlList[a.itemId]!="Y"){a.disabled=true}this.insert(b,a);this.sub(a.itemId).on(a.eventName,a.eventFn)},disabledItem:function(c,a){var b=Ext.isNumber(c)?this.items.getAt(c):this.items.get(c);if(!b){return}if(this.ctrlList&&this.ctrlList[c]&&this.ctrlList[c]!="Y"){a=true}if(a){b.disable()}else{b.enable()}},hiddenItem:function(b,a){if(Ext.isNumber(b)){this.items.getAt(b).hidden=a}else{this.items.get(b).hidden=a}},getItem:function(a){if(Ext.isNumber(a)){return this.items.getAt(a)}else{return this.items.get(a)}},zfill:{xtype:"tbfill",itemId:"tbfill"},zbtnversionup:{xtype:"button",cls:"fontWeightBold",text:T("Caption.Button.Version Up"),itemId:"btnVersionUp"},zbtncreate:{xtype:"button",text:T("Caption.Button.Create"),itemId:"btnCreate"},zbtnupdate:{xtype:"button",text:T("Caption.Button.Update"),itemId:"btnUpdate"},zbtndelete:{xtype:"button",text:T("Caption.Button.Delete"),itemId:"btnDelete"},zbtnclose:{xtype:"button",text:T("Caption.Button.Close"),itemId:"btnClose"},zbtnprocess:{xtype:"button",text:T("Caption.Button.Process"),itemId:"btnProcess"},zbtnview:{xtype:"button",text:T("Caption.Button.View"),itemId:"btnView"},zbtnrefresh:{xtype:"button",text:T("Caption.Button.Refresh"),itemId:"btnRefresh"},zbtnexport:{xtype:"button",text:T("Caption.Button.Export"),itemId:"btnExport"},zbtnexportx:{xtype:"exporterbutton",itemId:"btnExportx",width:24}});Ext.define("MES.view.form.field.LineSeparator",{extend:"Ext.Component",alias:"widget.separator",html:"<hr/>"});Ext.define("MES.view.form.field.TranLotField",{extend:"Ext.container.Container",alias:"widget.tranlotfield",layout:"anchor",defaults:{anchor:"100%"},initComponent:function(){this.callParent();if(this.type=="sublot"){this.add(this.buildSublotItems())}else{this.add(this.buildLotItems())}},buildLotItems:function(){var a=true;if(SF.option.get("MP_AllowUseBackDate").value1=="Y"){a=false}return[{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"textfield",itemId:"txtTranLotId",name:"lotId",maxLength:25,enableKeyEvents:true,fieldLabel:T("Caption.Other.Lot ID"),labelStyle:"font-weight:bold",allowBlank:false,minWidth:300,flex:1},{cls:"borderAllNone",flex:1},{xtype:"checkbox",boxLabel:T("Caption.Other.Transaction Time"),itemId:"chkTranTime",inputValue:"Y",uncheckedValue:" ",submitValue:false,value:" ",hidden:a,width:200},{xtype:"datetimex",cls:"marginR3",itemId:"dteTranTime",name:"backTime",disabled:true,submitValue:false,hidden:a,flex:1}]},{xtype:"textfield",fieldLabel:T("Caption.Other.Description"),itemId:"txtLotDesc",name:"lotDesc",flex:1,submitValue:false,readOnly:true}]},buildSublotItems:function(){var a=true;if(SF.option.get("MP_AllowUseBackDate").value1=="Y"){a=false}return[{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"textfield",itemId:"txtTranSublotId",name:"sublotId",maxLength:25,enableKeyEvents:true,fieldLabel:T("Caption.Other.Sublot ID"),labelStyle:"font-weight:bold",allowBlank:false,minWidth:300},{cls:"borderAllNone",flex:1},{xtype:"checkbox",boxLabel:T("Caption.Other.Transaction Time"),itemId:"chkTranTime",inputValue:"Y",uncheckedValue:" ",submitValue:false,value:" ",hidden:a,width:200},{xtype:"datetimex",cls:"marginR3",itemId:"dteTranTime",name:"backTime",disabled:true,submitValue:false,hidden:a,flex:1}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"textfield",fieldLabel:T("Caption.Other.Lot ID"),itemId:"txtTranLotId",name:"lotId",minWidth:300,readOnly:true},{cls:"borderAllNone",flex:1},{xtype:"textfield",fieldLabel:T("Caption.Other.Slot No"),itemId:"txtSlotNo",name:"slotNo",flex:1,readOnly:true}]}]}});Ext.define("MES.view.form.field.FixedColumn",{extend:"Ext.grid.column.Column",alias:"widget.fixedcolumn",renderer:function(e,c,b,f,d){var a=this.columns[d].precision||0;return Ext.Number.toFixed(parseFloat(e),a)}});Ext.define("MES.view.form.field.Decimalfield",{extend:"Ext.form.field.Number",alias:"widget.decimalfield",listeners:{change:function(a,b){if(b>a.maxValue){a.setValue(a.maxValue)}}},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=String(c).replace(a,".");c=b.fixPrecisionString(c);c=String(c).replace(".",a);return c},fixPrecisionString:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return Ext.Number.toFixed(parseFloat(d),a)},beforeBlur:function(){var b=this,a=b.getRawValue();if(!Ext.isEmpty(a)){b.setValue(a)}}});Ext.define("MES.view.form.SupplementForm",{extend:"Ext.form.Panel",alias:["widget.formsup","widget.mes_view_supplementform"],cls:"nav supplement",bodyCls:"paddingAll7",layout:{type:"vbox",align:"stretch"},defaults:{labelAlign:"left"},buttonAlign:"center",initComponent:function(){this.autoFormLoad=this.autoFormLoad===false?false:true;this.buttons=[this.zbtnview,this.btnreset];this.callParent();if(this.fields){this.add(this.fields)}if(this.hiddenFields){this.add(this.hiddenFields)}this.addEvents({supplementSelected:true,supplementReset:true});var a=this;this.on("afterrender",function(){if(a.autoFormLoad==true){Ext.defer(function(){a.onBtnView()},1000)}});this.sub("btnView").on("click",function(){a.onBtnView()});this.sub("btnReset").on("click",function(){a.onBtnReset()})},onBtnView:function(){var a=this.getForm().getValues();Ext.applyIf(a,{procstep:this.procstep||"1"});if(this.getForm().isValid()!==false){this.fireEvent("supplementSelected",a)}this.selectData=a},onBtnReset:function(){var a=this.getForm().getValues();Ext.applyIf(a,{procstep:this.procstep||"1"});this.fireEvent("supplementReset",a);this.getForm().reset()},zbtnview:{text:T("Caption.Button.View"),itemId:"btnView"},btnreset:{text:T("Caption.Button.Reset"),itemId:"btnReset"}});Ext.define("MES.view.form.SupplementGridForm",{extend:"Ext.panel.Panel",alias:["widget.gridsup","widget.mes_view_supplementgridform"],cls:"nav supplement",bodyCls:"paddingAll7",layout:{type:"vbox",align:"stretch"},defaults:{labelAlign:"left"},initComponent:function(){if(this.grid.autoFormLoad===false||this.grid.autoFormLoad===true){this.autoFormLoad=this.grid.autoFormLoad}else{if(this.autoFormLoad===false){this.autoFormLoad=false}else{this.autoFormLoad=true}}this.autoGridRefresh=this.grid.autoRefresh===false?false:true;this.grdItemId="grdSupplement";if(this.grid&&this.grid.store){this.store=this.grid.store;this.store.autoLoad=false;if(this.grid.itemId){this.grdItemId=this.grid.itemId}}this.dockedItems=[{xtype:"toolbar",dock:"bottom",height:24,items:[this.zcount,this.zsearch,this.zrefresh]}];this.callParent();if(this.fields||this.hiddenFields){var b=this.add({xtype:"form",itemId:"formFields",bodyCls:"borderRNone borderLNone",defaults:{labelSeparator:"",anchor:"100%"},items:[]});if(this.fields){b.add(this.fields)}if(this.hiddenFields){b.add(this.hiddenFields)}var c=b.getForm().getFields();if(c.length>0){this.formFields=c.items}}this.add(this.zgrid());this.addEvents({supplementSelected:true});var a=this;this.on("render",function(){if(a.autoGridRefresh!=false){a.refreshGrid(true,0)}});this.sub(this.grdItemId).store.on("datachanged",function(d){a.sub("txtGridCount").setValue(d.count())});this.sub("txtSearchField").on("change",function(f,d){a.refreshGrid(false)});this.sub("btnRefresh").on("click",function(){var g=[];if(a.selectedRec){var f=a.sub(a.grdItemId);for(var e in f.columns){var d=f.columns[e].dataIndex;g.push({column:d,value:a.selectedRec.get(d)})}}a.refreshGrid(true,g)});this.sub(this.grdItemId).on("itemclick",function(e,d){a.fireEvent("supplementSelected",d);a.selectedRec=d});this.store.on("load",function(k,e,l){if(l&&e.length!=0&&a.selectInfo!={}&&a.selectInfo.length!=0){var d=a.sub(a.grdItemId);var g=null;var i=a.selectInfo;if(Ext.typeOf(i)=="number"){g=e[i]}else{if(Ext.typeOf(i)=="object"){var f=i.column||"";var j=i.value||"";g=d.store.findRecord(f,j)}else{if(Ext.typeOf(i)=="array"){var h=d.store.queryBy(function(n,o){var m=false;Ext.Array.each(i,function(p){if(n.get(p.column)==p.value){m=true}else{m=false;return false}});return m});if(h.getAt(0)){g=h.getAt(0)}}}}if(g){if(a.autoFormLoad==true){a.fireEvent("supplementSelected",g)}d.getSelectionModel().select(g)}a.selectedRec=g}})},getGridLocalFilters:function(){var b=[];var c=this.sub("txtSearchField").getValue();var e="";if(this.grid.searchField){e=this.grid.searchField}else{e=this.grid.columns[0].dataIndex}b.push({property:e,value:new RegExp(c)});if(this.formFields){for(var a in this.formFields){var d=this.formFields[a];if(d.localFilter===true){b.push({property:d.name,value:d.getSubmitValue()})}}}return b},getGridParams:function(){var a=this.grid.procstep||"1";var d={procstep:a};if(this.formFields){for(var b in this.formFields){var c=this.formFields[b];if(c.submitValue!==false){d[c.name]=c.getSubmitValue()}}}return d},getSelectedRec:function(){return this.selectedRec},refreshGrid:function(d,a){var c=this.sub(this.grdItemId);var b=c.store;b.clearFilter(true);b.filter(this.getGridLocalFilters());if(Ext.typeOf(a)=="number"||Ext.typeOf(a)=="object"||Ext.typeOf(a)=="array"){this.selectInfo=a}else{this.selectInfo={}}if(d){b.load({params:this.getGridParams()})}},setAutoRecordLoad:function(a){this.autoRecordLoad=a},setAutoFormLoad:function(a){this.autoFormLoad=a},addFieldEventFn:function(c,b,a){this.sub(c).on(b,a)},zgrid:function(){var b=this.sheet||"Supplement";var a={xtype:"grid",itemId:this.grdItemId,flex:1,autoScroll:true,columnLines:true,store:this.store,features:Ext.create("Ext.grid.feature.Grouping",{groupHeaderTpl:'{name} ({rows.length} Version{[values.rows.length > 1 ? "s" : ""]})'})};if(this.grid){Ext.apply(a,this.grid)}return a},zcount:{xtype:"textfield",disabled:true,itemId:"txtGridCount",cls:"bottomTextField  textAlignCenter",flex:1},zsearch:{xtype:"textfield",itemId:"txtSearchField",cls:"bottomTextField",flex:3},zrefresh:{xtype:"button",cls:"supplementRefresh",itemId:"btnRefresh",width:24}});Ext.define("MES.view.form.SupplementTabs",{extend:"Ext.panel.Panel",alias:["widget.tabssup","widget.mes_view_supplementtabs"],layout:{type:"vbox",align:"stretch"},initComponent:function(){this.callParent();if(this.fields){this.add(this.fields)}if(this.hiddenFields){this.add(this.hiddenFields)}var a=this;this.tabPanel=this.add({xtype:"tabpanel",itemId:"supTabPanel",bodyCls:"borderT borderRNone borderLNone borderBNone",plain:true,flex:1});var c=[];if(Ext.typeOf(this.tabs)=="object"&&this.tabs!={}){c.push(this.tabs)}if(Ext.typeOf(this.tabs)=="array"){c=this.tabs}if(c.length>0){for(var b in c){this.tabPanel.add(c[b])}this.tabPanel.setActiveTab(0)}this.addEvents({supplementSelected:true})},getTabPanel:function(){return this.tabPanel}});Ext.require(["Ext.ux.exporter.Exporter"]);Ext.define("MES.view.form.BaseForm",{extend:"Ext.form.Panel",alternateClassName:"BaseForm",requires:["CMN.plugin.Supplement"],bodyCls:"paddingAll10",layout:"anchor",defaults:{anchor:"100%",labelSeparator:""},autoScroll:true,dockedItems:{xtype:"mes_view_basebuttons",itemId:"basebuttons"},initComponent:function(){this.plugins=[Ext.create("CMN.plugin.Supplement")];if(this.buildSupplement!=Ext.emptyFn){this.supplement=this.buildSupplement();this.supplement.sheet=this.title||"Supplement"}if(this.buttonsOpt){this.dockedItems.buttonsOpt=Ext.clone(this.buttonsOpt);this.dockedItems.ctrlList=this.ctrlList}else{this.dockedItems.buttonsOpt={}}this.callParent();var b=this;var a=Ext.getBody();this.downloadFrame=a.createChild({tag:"iframe",cls:"x-hidden",id:"iframe",name:"iframe"});this.downloadForm=a.createChild({tag:"form",cls:"x-hidden",id:"form",target:"iframe"});if(this.buildForm!=Ext.emptyFn){var d=this.buildForm(this);if(d){this.add(d)}}if(this.buildHiddenForm!=Ext.emptyFn){this.add(this.buildHiddenForm(this))}var c=this.getForm();if(this.formReader){c.reader=Ext.create("Ext.data.reader.Json",this.formReader)}if(this.payload!==undefined){c.payload=this.payload}var e=this.down("#basebuttons");e.setClientForm(c);e.setBaseFormPanel(this);c.trackResetOnLoad=true;e.on("beforeCreate",function(g,h,f){if(b.checkCondition("btnCreate",g,h)===false){return false}return b.onBeforeCreate(g,h,f)});e.on("beforeUpdate",function(g,h,f){if(b.checkCondition("btnUpdate",g,h)===false){return false}return b.onBeforeUpdate(g,h,f)});e.on("beforeDelete",function(g,h,f){if(b.checkCondition("btnDelete",g,h)===false){return false}return b.onBeforeDelete(g,h,f)});e.on("beforeVersionUp",function(f,h,g){if(b.checkCondition("btnVersionUp",f,h)===false){return false}return b.onBeforeVersionUp(f,h,g)});e.on("beforeProcess",function(g,h,f){if(b.checkCondition("btnProcess",g,h)===false){return false}return b.onBeforeProcess(g,h,f)});e.on("beforeExport",function(g,h,f){return b.onBeforeExport(g,h,f)});e.on("beforeClose",function(){return b.onBeforeClose()});e.on("afterCreate",function(f,g,h){b.onAfterCreate(f,g,h)});e.on("afterUpdate",function(f,g,h){b.onAfterUpdate(f,g,h)});e.on("afterDelete",function(f,g,h){b.onAfterDelete(f,g,h)});e.on("afterVersionUp",function(f,g,h){b.onAfterVersionUp(f,g,h)});e.on("afterProcess",function(f,g,h){b.onAfterProcess(f,g,h)});e.on("afterView",function(f){if(b.checkCondition("btnView",f)===false){return false}b.onAfterView(f)});e.on("afterRefresh",function(f){b.onAfterRefresh(f)});e.on("afterClose",function(){b.onClose()});this.funcName=this.funcName||this.itemId;this.getSecCmpList(this);this.getSecControl(this)},formLoad:function(c,b){if(typeof(this.onBeforeFormLoad)==="function"){if(this.onBeforeFormLoad(c)===false){return}}var a=Ext.emptyFn;if(b===true){a=function(e,d){this.onAfterFormLoad(e,d);if(d.result.success===true){SmartFactory.msgRtn(d.result.data.msgcode,d.result.data.msg)}else{SmartFactory.msgRtn("failure",d.result.data)}}}else{a=this.onAfterFormLoad}this.getForm().load({params:c,success:a,failure:a,url:this.getLoadUrl(),method:this.getLoadMethod(),scope:this})},getLoadUrl:function(){if(this.formReader){return this.formReader.url}},getLoadMethod:function(){if(this.formReader){return this.formReader.method||"GET"}},getButtons:function(){return this.down("#basebuttons")},getSecCmpList:function(b){var a=b.query("button");var d=[];for(var c in a){if(a[c].xtype=="button"&&a[c].itemId&&a[c].itemId.length>3&&a[c].itemId.substring(0,3)=="btn"&&a[c].itemId!="btnCodeView"){d.push(a[c]);a[c].on("enable",function(e){if(!b.ctrlList){return}if(b.ctrlList[e.itemId]!=undefined&&b.ctrlList[e.itemId]!="Y"){e.setDisabled(true)}})}}b.ctrlCmpList=d},setSecControl:function(b){var a=b.ctrlCmpList||[];for(var c in a){var d=a[c].itemId;if(b.ctrlList[d]!=undefined&&b.ctrlList[d]!="Y"){a[c].setDisabled(true)}}},getSecControl:function(c){if(!c.funcName){return}var d={procstep:"1",programId:"WEBClient",funcName:this.funcName};var b="secViewFunctionDetail";var a=function(g,f){g.ctrlList={};if(f.result.success!=true){return}for(var h=1;h<=10;h++){var e=f.result["ctlName"+h];if(e){g.ctrlList[e]=f.result["ctlEnFlag"+h]||""}}g.setSecControl(g)};Ext.Ajax.request({url:"service/"+b+".json",method:"GET",params:d,success:function(f,g){var e=Ext.JSON.decode(f.responseText);f.result=e||{};f.params=f.request.options.params||{};if(e.success!==true&&e.msgcode!="SEC-0008"){SmartFactory.msgRtn("failure",e)}if(Ext.typeOf(a)=="function"){a(c,f)}},failure:function(e,f){Ext.log("failure");Ext.log(e)},scope:c})},onBeforeFormLoad:Ext.emptyFn,onBeforeCreate:Ext.emptyFn,onBeforeUpdate:Ext.emptyFn,onBeforeDelete:Ext.emptyFn,onBeforeVersionUp:Ext.emptyFn,onBeforeProcess:Ext.emptyFn,onBeforeClose:Ext.emptyFn,onBeforeExport:Ext.emptyFn,onAfterFormLoad:Ext.emptyFn,onAfterCreate:Ext.emptyFn,onAfterUpdate:Ext.emptyFn,onAfterDelete:Ext.emptyFn,onAfterVersionUp:Ext.emptyFn,onAfterView:Ext.emptyFn,onAfterProcess:Ext.emptyFn,onAfterRefresh:Ext.emptyFn,onClose:function(){this.close()},buildSupplement:Ext.emptyFn,buildForm:Ext.emptyFn,buildHiddenForm:Ext.emptyFn,checkCondition:Ext.emptyFn});Ext.define("MES.view.form.BaseFormTabs",{extend:"MES.view.form.BaseForm",alternateClassName:"BaseFormTabs",layout:{type:"vbox",align:"stretch"},initComponent:function(){this.callParent()},getTabPanel:function(){return this.tabPanel},buildForm:function(){this.callParent();if(this.buildTopPart!=Ext.emptyFn){this.add(this.buildTopPart(this))}this.tabPanel=this.add({xtype:"tabpanel",itemId:"baseTabPanel",autoScroll:true,flex:1,bodyCls:"scrollXHidden"})},buildTopPart:Ext.emptyFn});Ext.define("MES.view.form.BaseFormTabsEntity",{extend:"MES.view.form.BaseFormTabs",alternateClassName:"SetupForm01",layout:{type:"vbox",align:"stretch"},initComponent:function(){this.callParent()},buildForm:function(){this.callParent();var a=this.getTabPanel();var c=[this.buildGeneralTab(this),this.buildPropertiesTab(this),this.buildGroupSetupTab(this),this.buildAttributeSetupTab(this),this.buildCustomFieldSetupTab(this),this.buildOtherTabs(this)];for(var b=0;b<c.length;b++){if(c[b] instanceof Object){a.add(c[b])}}a.setActiveTab(0)},onBeforeFormLoad:function(a){if(this.sub("tabGroupsetup").buildOk!=true){return false}if(this.sub("tabCmfsetup").buildOk!=true){return false}return true},buildGeneralTab:Ext.emptyFn,buildPropertiesTab:Ext.emptyFn,buildGroupSetupTab:function(a){var b=a.grpCmfTypeName||"";var c=SmartFactory.gcmGrp[b]||a.groupDefaultTable;var d=SmartFactory.grp[b]||a.groupItemName;return{xtype:"wip_view_groupsetup",title:T("Caption.Other.Group Setup"),itemId:"tabGroupsetup",itemName:d,groupDefaultTable:c,fieldNamePrefix:a.groupFieldNamePrefix,cmfMaxCnt:10}},buildAttributeSetupTab:function(a){return{xtype:"bas_attrgrid",title:T("Caption.Other.Attribute"),itemId:"tabGridAttribute",attrType:a.attrType}},buildCustomFieldSetupTab:function(a){var c=a.grpCmfTypeName||"";var b=SmartFactory.cmf[c]||a.cmfItemName;return{xtype:"wip_view_groupsetup",title:T("Caption.Other.Customized Field"),itemId:"tabCmfsetup",useCodeView:true,itemName:b,fieldNamePrefix:a.cmfFieldNamePrefix,cmfMaxCnt:a.cmfMaxCnt}},buildOtherTabs:Ext.emptyFn});Ext.define("MES.view.form.BaseFormComposite",{extend:"Ext.tab.Panel",alternateClassName:"BaseFormComposite",initComponent:function(){this.callParent();var a=this;this.buildForms(this);this.items.each(function(c){var b=c.onBeforeClose;c.onBeforeClose=function(){var d=true;a.items.each(function(e){d=d&&e.onBeforeClose.origin.call(e,e)});return d};c.onBeforeClose.origin=b;b=c.onClose;c.onClose=function(){a.items.each(function(d){d.onClose.origin.call(d,d)});a.close()};c.onClose.origin=b});this.on("activate",function(){if(a.getActiveTab()){a.getActiveTab().fireEvent("activate")}})},buildForms:Ext.emptyFn});Ext.define("MES.view.form.BaseLotTranForm",{extend:"MES.view.form.BaseForm",alternateClassName:"BaseLotTranForm",bodyCls:"paddingAll10",layout:{type:"vbox",align:"stretch"},buildSupplement:function(){return{xtype:"container",items:Ext.create("MES.view.form.TranWorkstation",{itemId:"viewWorkStation"})}},initComponent:function(){this.callParent();var a=this;this.addEvents("changelotid","keydownlotid");if(SF.setting.get("currentLotId")!=""){this.sub("txtTranLotId").setValue(SF.setting.get("currentLotId"))}this.on("afterrender",function(){var c=a.sub("txtTranLotId").getValue();var b=a.getSupplement();if(b){var d=b.sub("viewWorkStation");if(d){d.setWorkStation(c)}}a.loadLotInfo(c);a.sub("viewLotInfo").on("loadlotinfo",function(f){a.sub("txtLotDesc").setValue(f.get("lotDesc"));a.loadResStatus(f.get("resId"));var h=a.sub("tabTranCmf");if(h){h.getForm().getFields().each(function(i){i.setValue(null)})}var g=a.sub(a.generalItemId);if(g){var e=new Ext.util.MixedCollection();e.addAll(g.query("[isFormField]"));e.each(function(i){i.setValue(null)})}if(a.afterLoadLotInfo!=Ext.emptyFn){a.afterLoadLotInfo(f)}});a.sub("viewResStatus").on("loadresstatus",function(e){if(a.afterLoadResStatus!=Ext.emptyFn){a.afterLoadResStatus(e)}})});this.sub("txtTranLotId").on("keydown",function(b,d){if(d.keyCode==13){var c=a.sub("txtTranLotId").getValue();a.loadLotInfo(c)}a.fireEvent("keydownlotid",b,d)});this.sub("txtTranLotId").on("change",function(c,b){a.fireEvent("changelotid",c,b)});this.sub("chkTranTime").on("change",function(b,c){if(c){a.sub("dteTranTime").setDisabled(!c)}else{a.sub("dteTranTime").setDisabled(!c)}})},buildForm:function(){this.callParent();var b=this.buildTranInfo();if(Ext.typeOf(b)=="object"&&b.xtype!="tabpanel"){var a={xtype:"separator"};this.add([this.buildLot(),a,b])}else{this.add([this.buildLot(),b])}},buildLot:function(a){return{xtype:"tranlotfield"}},buildTranInfo:function(){var d=this;d.generalItemId="tabGeneral";function b(k){var i=[];var j=false;var l=false;if(d.showLotInfoList===false){j=true}if(d.showResStatus===false){l=true}var h=Ext.typeOf(k);if(h=="array"){i.push({xtype:"container",itemId:"tabGeneral",flex:5,layout:"anchor",defaults:{anchor:"100%"},autoScroll:true,cls:"mainInputField paddingAll5",items:k})}else{if(h=="object"){if(k.items){if(!k.itemId){k.itemId=d.generalItemId}k.cls=k.cls+" mainInputField";k.autoScroll=k.autoScroll===false?false:true;k.flex=5;d.generalItemId=k.itemId}i.push(k)}}var g=false;if(l&&j){g=true}i.push({xtype:"container",flex:3,hidden:g||false,layout:"anchor",items:[d.buildResStatus(l),d.buildLotInfo(j)]});return{xtype:"container",itemId:d.generalItemId,title:T("Caption.Other.General"),flex:1,layout:{type:"hbox",align:"stretch"},items:i}}var e={};if(this.buildGeneral!=Ext.emptyFn){var c=this.buildGeneral(this);e=b(c)}else{if(this.buildGeneralTab!=Ext.emptyFn){var a=this.buildGeneralTab(this);var f=[b(a,1)];if(this.buildCustomFieldSetupTab!=Ext.emptyFn){f.push(this.buildCustomFieldSetupTab(this))}e={xtype:"tabpanel",itemId:"tranTabPanel",flex:1,items:f}}else{c={xtype:"container",itemId:d.generalItemId,title:T("Caption.Other.General"),flex:1,items:[{xtype:"container"}]};e=b(c)}}return e},buildResStatus:function(a,b){var c={itemId:b||"viewResStatus",cls:"subColumn paddingAll5",hidden:a||false};return Ext.create("MES.view.form.TranResStatus",c)},buildLotInfo:function(b,c){c=c||"viewLotInfo";var a={itemId:c,cls:"subColumn paddingAll5",hidden:b||false};if(this.showLotInfoList&&this.showLotInfoList.length>0){a.showInfoList=this.showLotInfoList}return Ext.create("MES.view.form.TranLotInfo",a)},buildCustomFieldSetupTab:function(a){if(!a.cmfItemName||!a.cmfFieldNamePrefix){return false}return{xtype:"wip_view_groupsetup",title:T("Caption.Other.Customized Field"),itemId:"tabTranCmf",flex:1,useCodeView:true,itemName:a.cmfItemName,fieldNamePrefix:a.cmfFieldNamePrefix,cmfMaxCnt:a.cmfMaxCnt}},buildGeneral:Ext.emptyFn,buildGeneralTab:Ext.emptyFn,loadLotInfo:function(a){a=a||this.sub("txtTranLotId").getValue();if(a){this.selectedLotId=a;this.sub("viewLotInfo").loadLotInfo(a)}},getLotId:function(){return this.sub("txtTranLotId").getValue()},setLotInfo:function(a){if(a){this.sub("viewLotInfo").setLotInfo(a)}},getLotInfo:function(){return this.sub("viewLotInfo").getLotInfo()},loadResStatus:function(a){a=a||"";this.selectedResId=a;this.sub("viewResStatus").loadResStatus(a)},getResStatus:function(){return this.sub("viewResStatus").getResStatus()},setResStatus:function(a){if(a){this.sub("viewResStatus").setResStatus()}},getTranTabPanel:function(){return this.sub("tranTabPanel")},afterLoadLotInfo:Ext.emptyFn,afterLoadResStatus:Ext.emptyFn});Ext.define("MES.view.form.BaseTargetLotTranForm",{extend:"MES.view.form.BaseForm",alternateClassName:"BaseTargetLotTranForm",bodyCls:"paddingAll10",layout:{type:"vbox",align:"stretch"},buildSupplement:function(){return{xtype:"container",items:Ext.create("MES.view.form.TranWorkstation",{itemId:"viewWorkStation"})}},initComponent:function(){this.callParent();var a=this;this.addEvents("changelotid","keydownlotid");if(SF.setting.get("currentLotId")!=""){this.sub("txtTranLotId").setValue(SF.setting.get("currentLotId"))}this.on("afterrender",function(){var c=a.sub("txtTranLotId").getValue();var b=a.getSupplement();if(b){var d=b.sub("viewWorkStation");if(d){d.setWorkStation(c)}}a.loadLotInfo(c);a.sub("viewLotInfo").on("loadlotinfo",function(f){var h=a.sub("tabTranCmf");if(h){h.getForm().getFields().each(function(i){i.setValue(null)})}var g=a.sub(a.generalItemId);if(g){var e=new Ext.util.MixedCollection();e.addAll(g.query("[isFormField]"));e.each(function(i){i.setValue(null)})}if(a.afterLoadLotInfo!=Ext.emptyFn){a.afterLoadLotInfo(f)}});a.sub("targetLotInfo").on("loadlotinfo",function(e){if(a.afterTargetLoadLotInfo!=Ext.emptyFn){a.afterTargetLoadLotInfo(e)}})});this.sub("txtTranLotId").on("keydown",function(b,d){if(d.keyCode==13){var c=a.sub("txtTranLotId").getValue();a.loadLotInfo(c)}a.fireEvent("keydownlotid",b,d)});this.sub("txtTranLotId").on("change",function(c,b){a.fireEvent("changelotid",c,b)});this.sub("chkTranTime").on("change",function(b,c){if(c){a.sub("dteTranTime").setDisabled(!c)}else{a.sub("dteTranTime").setDisabled(!c)}})},buildForm:function(){this.callParent();var b=this.buildTranInfo();if(Ext.typeOf(b)=="object"&&b.xtype!="tabpanel"){var a={xtype:"separator"};this.add([this.buildLot(),a,b])}else{this.add([this.buildLot(),b])}},buildLot:function(a){return{xtype:"tranlotfield"}},buildTranInfo:function(){var c=this;c.generalItemId="tabGeneral";function b(h){var g=[];var f=Ext.typeOf(h);if(f=="array"){g.push({xtype:"container",itemId:c.generalItemId,flex:5,layout:"anchor",defaults:{anchor:"100%"},autoScroll:true,cls:"mainInputField paddingAll5",items:h})}else{if(f=="object"){if(h.items){if(!h.itemId){h.itemId=c.generalItemId}h.cls=h.cls+" mainInputField";h.autoScroll=h.autoScroll===false?false:true;h.flex=5}g.push(h)}}g.push(c.buildLotInfo("Target Lot Infomation","targetLotInfo"));g.push(c.buildLotInfo("Main Lot Infomation"));return{xtype:"container",itemId:c.generalItemId,title:T("Caption.Other.General"),flex:1,layout:{type:"hbox",align:"stretch"},items:g}}var d={};if(this.buildGeneralTab!=Ext.emptyFn){var a=this.buildGeneralTab(this);var e=[b(a)];if(this.buildCustomFieldSetupTab!=Ext.emptyFn){e.push(this.buildCustomFieldSetupTab(this))}d={xtype:"tabpanel",itemId:"tranTabPanel",flex:1,items:e}}else{general={xtype:"container",itemId:c.generalItemId,title:T("Caption.Other.General"),flex:1,items:[{xtype:"container"}]};d=b(general)}return d},buildLotInfo:function(c,b){b=b||"viewLotInfo";var a={infoTitle:c||"Lot Information",itemId:b,flex:3,cls:"subColumn paddingAll5"};if(this.showLotInfoList&&this.showLotInfoList.length>0){a.showInfoList=this.showLotInfoList}return Ext.create("MES.view.form.TranLotInfo",a)},buildCustomFieldSetupTab:function(a){if(!a.cmfItemName||!a.cmfFieldNamePrefix){return false}return{xtype:"wip_view_groupsetup",title:T("Caption.Other.Customized Field"),itemId:"tabTranCmf",flex:1,useCodeView:true,itemName:a.cmfItemName,fieldNamePrefix:a.cmfFieldNamePrefix,cmfMaxCnt:a.cmfMaxCnt}},buildGeneralTab:Ext.emptyFn,loadLotInfo:function(a){a=a||this.sub("txtTranLotId").getValue();if(a){this.selectedLotId=a;this.sub("viewLotInfo").loadLotInfo(a)}},loadTargetLotInfo:function(a){if(!a){Ext.Msg.alert("Error",T("Message.ValidInput",{field1:T("Caption.Other.Target Lot ID")}));return false}this.sub("targetLotInfo").loadLotInfo(a)},getLotId:function(){return this.sub("txtTranLotId").getValue()},setLotInfo:function(a){if(a){this.sub("viewLotInfo").setLotInfo(a)}},setTargetLotInfo:function(a){if(a){this.sub("targetLotInfo").setLotInfo(a)}},getLotInfo:function(){return this.sub("viewLotInfo").getLotInfo()},getTargetLotInfo:function(){return this.sub("targetLotInfo").getLotInfo()},getTranTabPanel:function(){return this.sub("tranTabPanel")},afterLoadLotInfo:Ext.emptyFn,afterTargetLoadLotInfo:Ext.emptyFn});Ext.define("MES.view.form.BaseSublotTranForm",{extend:"MES.view.form.BaseForm",alternateClassName:"BaseSublotTranForm",bodyCls:"paddingAll10",layout:{type:"vbox",align:"stretch"},buildSupplement:function(){return{xtype:"container",items:Ext.create("MES.view.form.TranWorkstation",{itemId:"viewWorkStation"})}},initComponent:function(){this.callParent();var a=this;this.addEvents("changesublotid","keydownsublotid");this.on("afterrender",function(){var b=a.sub("txtTranSublotId").getValue();var c=a.getSupplement();if(c){var d=c.sub("viewWorkStation");if(d){d.setWorkStation(b)}}a.loadSublotInfo(b);a.sub("viewSublotInfo").on("loadsublotinfo",function(f){a.sub("txtTranLotId").setValue(f.get("lotId"));a.sub("txtSlotNo").setValue(f.get("slotNo"));a.loadResStatus(f.get("resId"));var h=a.sub("tabTranCmf");if(h){h.getForm().getFields().each(function(i){i.setValue(null)})}var g=a.sub(a.generalItemId);if(g){var e=new Ext.util.MixedCollection();e.addAll(g.query("[isFormField]"));e.each(function(i){i.setValue(null)})}if(a.afterLoadSublotInfo!=Ext.emptyFn){a.afterLoadSublotInfo(f)}});a.sub("viewResStatus").on("loadresstatus",function(e){if(a.afterLoadResStatus!=Ext.emptyFn){a.afterLoadResStatus(e)}})});this.sub("txtTranSublotId").on("keydown",function(c,d){if(d.keyCode==13){var b=a.sub("txtTranSublotId").getValue();a.loadSublotInfo(b)}a.fireEvent("keydownsublotid",c,d)});this.sub("txtTranSublotId").on("change",function(c,b){a.fireEvent("changesublotid",c,b)});this.sub("chkTranTime").on("change",function(b,c){if(c){a.sub("dteTranTime").setDisabled(!c)}else{a.sub("dteTranTime").setDisabled(!c)}})},buildForm:function(){this.callParent();var b=this.buildTranInfo();if(Ext.typeOf(b)=="object"&&b.xtype!="tabpanel"){var a={xtype:"separator"};this.add([this.buildLot(),a,b])}else{this.add([this.buildLot(),b])}},buildLot:function(a){return{xtype:"tranlotfield",type:"sublot"}},buildTranInfo:function(){var d=this;d.generalItemId="tabGeneral";function b(k){var i=[];var j=false;var l=false;if(d.showSublotInfoList===false){j=true}if(d.showResStatus===false){l=true}var h=Ext.typeOf(k);if(h=="array"){i.push({xtype:"container",itemId:d.generalItemId,flex:5,layout:"anchor",defaults:{anchor:"100%"},autoScroll:true,cls:"mainInputField paddingAll5",items:k})}else{if(h=="object"){if(k.items){if(!k.itemId){k.itemId=d.generalItemId}k.cls=k.cls+" mainInputField";k.autoScroll=k.autoScroll===false?false:true;k.flex=5}i.push(k)}}var g=false;if(l&&j){g=true}i.push({xtype:"container",flex:3,hidden:g||false,layout:"anchor",items:[d.buildResStatus(l),d.buildSublotInfo(j)]});return{xtype:"container",itemId:d.generalItemId,title:T("Caption.Other.General"),flex:1,layout:{type:"hbox",align:"stretch"},items:i}}var e={};if(this.buildGeneral!=Ext.emptyFn){var c=this.buildGeneral(this);e=b(c)}else{if(this.buildGeneralTab!=Ext.emptyFn){var a=this.buildGeneralTab(this);var f=[b(a,1)];if(this.buildCustomFieldSetupTab!=Ext.emptyFn){f.push(this.buildCustomFieldSetupTab(this))}e={xtype:"tabpanel",itemId:"tranTabPanel",flex:1,items:f}}else{c={xtype:"container",itemId:d.generalItemId,title:T("Caption.Other.General"),flex:1,items:[{xtype:"container"}]};e=b(c)}}return e},buildResStatus:function(a,b){var c={itemId:b||"viewResStatus",cls:"subColumn paddingAll5",hidden:a||false};return Ext.create("MES.view.form.TranResStatus",c)},buildSublotInfo:function(b,c){c=c||"viewSublotInfo";var a={itemId:c,cls:"subColumn paddingAll5",hidden:b||false};if(this.showSublotInfoList&&this.showSublotInfoList.length>0){a.showInfoList=this.showSublotInfoList}return Ext.create("MES.view.form.TranSublotInfo",a)},buildCustomFieldSetupTab:function(a){if(!a.cmfItemName||!a.cmfFieldNamePrefix){return false}return{xtype:"wip_view_groupsetup",title:T("Caption.Other.Customized Field"),itemId:"tabTranCmf",flex:1,useCodeView:true,itemName:a.cmfItemName,fieldNamePrefix:a.cmfFieldNamePrefix,cmfMaxCnt:a.cmfMaxCnt}},buildGeneral:Ext.emptyFn,buildGeneralTab:Ext.emptyFn,loadSublotInfo:function(a){a=a||this.sub("txtTranSublotId").getValue();if(a){this.selectedSublotId=a;this.sub("viewSublotInfo").loadSublotInfo(a)}},getSublotId:function(){return this.sub("txtTranSublotId").getValue()},setSublotInfo:function(a){if(a){this.sub("viewSublotInfo").setSublotInfo(a)}},getSublotInfo:function(){return this.sub("viewSublotInfo").getSublotInfo()},loadResStatus:function(a){a=a||"";this.selectedResId=a;this.sub("viewResStatus").loadResStatus(a)},getResStatus:function(){return this.sub("viewResStatus").getResStatus()},setResStatus:function(a){if(a){this.sub("viewResStatus").setResStatus()}},getTranTabPanel:function(){return this.sub("tranTabPanel")},afterLoadSublotInfo:Ext.emptyFn,afterLoadResStatus:Ext.emptyFn});Ext.require(["MES.mixin.CodeView","MES.mixin.Constant","MES.mixin.Variable","MES.mixin.CommonFunction","MES.data.CodeViewRegister","mixin.Communicator"]);Ext.define("MES.controller.MESController",{extend:"Ext.app.Controller",requires:["MES.view.form.BaseFormTabsEntity","MES.view.form.BaseForm","MES.view.form.BaseFormTabs","MES.view.form.BaseFormComposite","MES.view.form.BaseLotTranForm","MES.view.form.BaseSublotTranForm","MES.view.form.BaseTargetLotTranForm"],stores:[],models:[],views:["MES.view.form.field.CodeViewField","MES.view.form.field.CodeViewColumn","MES.view.form.SupplementForm","MES.view.form.SupplementGridForm","MES.view.form.SupplementTabs","MES.view.form.field.BaseButtons","MES.view.form.field.GCMComboBox","MES.view.form.field.UserStamp","MES.view.form.field.LineSeparator","MES.view.form.field.Decimalfield","MES.view.form.field.ColorField","MES.view.form.field.TranLotField","MES.view.form.field.FixedColumn"],init:function(){this.control({viewport:{afterrender:this.onViewportRendered}});this.setMixin();this.setCommunicator();this.setShiftInfo()},onViewportRendered:function(){},setMixin:function(){SmartFactory.mixin("MES.mixin.Constant");SmartFactory.mixin("MES.mixin.Variable");SmartFactory.mixin("MES.mixin.CodeView");SmartFactory.mixin("MES.mixin.CommonFunction");Ext.create("MES.data.CodeViewRegister");SmartFactory.mixin("mixin.Communicator",{memberJoinedIn:function(a){SmartFactory.msg("Joined in.",a.data.username)},memberJoinedOut:function(a){SmartFactory.msg("Joined out.",a.data.username)}})},setCommunicator:function(){Ext.Ajax.request({url:"service/SecViewSessionInfo.json",method:"GET",params:{procstep:"1"},async:false,success:function(a,b){result=Ext.JSON.decode(a.responseText);if(result.messagingLocation!=""&&result.messagingLocation!=undefined){SmartFactory.communicator.join(result.messagingLocation)}},failure:function(a,b){Ext.log("SecViewSessionInfo.")},scope:this})},setShiftInfo:function(){if(SF.gv.gsServerName=="ADMServer"){SF.gv.gShiftInfor.iShiftCount=0;SF.gv.gShiftInfor.sShift1StartTime="000000"}else{Ext.Ajax.request({url:"service/WipViewFactory.json",method:"GET",params:{procstep:"1"},async:false,success:function(c,e){var a=Ext.JSON.decode(c.responseText);if(a.success){var b=a.variableShiftFlag||"";SF.gv.gShiftInfor.bVariableShift=b=="Y"?true:false;if(SF.gv.gShiftInfor.bVariableShift==false){var d=0;if(a.shift1Start){SF.gv.gShiftInfor.cShift1DayFlag=a.shift1DayFlag;SF.gv.gShiftInfor.sShift1StartTime=a.shift1Start+"00";d++}if(a.shift2Start){SF.gv.gShiftInfor.cShift2DayFlag=a.shift2DayFlag;SF.gv.gShiftInfor.sShift2StartTime=a.shift2Start+"00";d++}if(a.shift3Start){SF.gv.gShiftInfor.cShift3DayFlag=a.shift3DayFlag;SF.gv.gShiftInfor.sShift3StartTime=a.shift3Start+"00";d++}if(a.shift4Start){SF.gv.gShiftInfor.cShift4DayFlag=a.shift4DayFlag;SF.gv.gShiftInfor.sShift4StartTime=a.shift4Start+"00";d++}SF.gv.gShiftInfor.iShiftCount=d}else{SF.gv.gShiftInfor.iShiftCount=0;SF.gv.gShiftInfor.sShift1StartTime="000000"}}},failure:function(a,b){},scope:this})}}});
